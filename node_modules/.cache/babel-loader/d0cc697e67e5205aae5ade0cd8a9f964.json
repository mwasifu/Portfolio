{"ast":null,"code":"/**\n    * @license\n    * Copyright 2021 Google LLC. All Rights Reserved.\n    * Licensed under the Apache License, Version 2.0 (the \"License\");\n    * you may not use this file except in compliance with the License.\n    * You may obtain a copy of the License at\n    *\n    * http://www.apache.org/licenses/LICENSE-2.0\n    *\n    * Unless required by applicable law or agreed to in writing, software\n    * distributed under the License is distributed on an \"AS IS\" BASIS,\n    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    * See the License for the specific language governing permissions and\n    * limitations under the License.\n    * =============================================================================\n    */\nimport { util, dispose, io, tidy, zeros, Tensor, tensor4d, unstack, max, slice, scalar, backend, moments, div, sub, add, sqrt, tensor1d, tensor3d, squeeze, oneHot, cast, stack, mul, tensor2d, mean, argMax, tensor, gather } from \"@tensorflow/tfjs-core\";\nimport { promisify } from \"util\";\nimport { array, zip } from \"@tensorflow/tfjs-data\";\nimport { loadLayersModel, model, sequential, layers } from \"@tensorflow/tfjs-layers\";\n\nvar extendStatics = function (e, t) {\n  return (extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (e, t) {\n    e.__proto__ = t;\n  } || function (e, t) {\n    for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]);\n  })(e, t);\n};\n\nfunction __extends(e, t) {\n  function r() {\n    this.constructor = e;\n  }\n\n  extendStatics(e, t), e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype, new r());\n}\n\nvar __assign = function () {\n  return (__assign = Object.assign || function (e) {\n    for (var t, r = 1, n = arguments.length; r < n; r++) for (var a in t = arguments[r]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]);\n\n    return e;\n  }).apply(this, arguments);\n};\n\nfunction __awaiter(e, t, r, n) {\n  return new (r || (r = Promise))(function (a, i) {\n    function o(e) {\n      try {\n        l(n.next(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function s(e) {\n      try {\n        l(n.throw(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function l(e) {\n      var t;\n      e.done ? a(e.value) : (t = e.value, t instanceof r ? t : new r(function (e) {\n        e(t);\n      })).then(o, s);\n    }\n\n    l((n = n.apply(e, t || [])).next());\n  });\n}\n\nfunction __generator(e, t) {\n  var r,\n      n,\n      a,\n      i,\n      o = {\n    label: 0,\n    sent: function () {\n      if (1 & a[0]) throw a[1];\n      return a[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return i = {\n    next: s(0),\n    throw: s(1),\n    return: s(2)\n  }, \"function\" == typeof Symbol && (i[Symbol.iterator] = function () {\n    return this;\n  }), i;\n\n  function s(i) {\n    return function (s) {\n      return function (i) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; o;) try {\n          if (r = 1, n && (a = 2 & i[0] ? n.return : i[0] ? n.throw || ((a = n.return) && a.call(n), 0) : n.next) && !(a = a.call(n, i[1])).done) return a;\n\n          switch (n = 0, a && (i = [2 & i[0], a.value]), i[0]) {\n            case 0:\n            case 1:\n              a = i;\n              break;\n\n            case 4:\n              return o.label++, {\n                value: i[1],\n                done: !1\n              };\n\n            case 5:\n              o.label++, n = i[1], i = [0];\n              continue;\n\n            case 7:\n              i = o.ops.pop(), o.trys.pop();\n              continue;\n\n            default:\n              if (!(a = (a = o.trys).length > 0 && a[a.length - 1]) && (6 === i[0] || 2 === i[0])) {\n                o = 0;\n                continue;\n              }\n\n              if (3 === i[0] && (!a || i[1] > a[0] && i[1] < a[3])) {\n                o.label = i[1];\n                break;\n              }\n\n              if (6 === i[0] && o.label < a[1]) {\n                o.label = a[1], a = i;\n                break;\n              }\n\n              if (a && o.label < a[2]) {\n                o.label = a[2], o.ops.push(i);\n                break;\n              }\n\n              a[2] && o.ops.pop(), o.trys.pop();\n              continue;\n          }\n\n          i = t.call(e, o);\n        } catch (e) {\n          i = [6, e], n = 0;\n        } finally {\n          r = a = 0;\n        }\n\n        if (5 & i[0]) throw i[1];\n        return {\n          value: i[0] ? i[1] : void 0,\n          done: !0\n        };\n      }([i, s]);\n    };\n  }\n}\n\nfunction __values(e) {\n  var t = \"function\" == typeof Symbol && Symbol.iterator,\n      r = t && e[t],\n      n = 0;\n  if (r) return r.call(e);\n  if (e && \"number\" == typeof e.length) return {\n    next: function () {\n      return e && n >= e.length && (e = void 0), {\n        value: e && e[n++],\n        done: !e\n      };\n    }\n  };\n  throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nfunction __read(e, t) {\n  var r = \"function\" == typeof Symbol && e[Symbol.iterator];\n  if (!r) return e;\n  var n,\n      a,\n      i = r.call(e),\n      o = [];\n\n  try {\n    for (; (void 0 === t || t-- > 0) && !(n = i.next()).done;) o.push(n.value);\n  } catch (e) {\n    a = {\n      error: e\n    };\n  } finally {\n    try {\n      n && !n.done && (r = i.return) && r.call(i);\n    } finally {\n      if (a) throw a.error;\n    }\n  }\n\n  return o;\n}\n\nfunction __spread() {\n  for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(__read(arguments[t]));\n\n  return e;\n}\n\nfunction loadMetadataJson(e) {\n  return __awaiter(this, void 0, void 0, function () {\n    var t, r, n, a, i, o, s;\n    return __generator(this, function (l) {\n      switch (l.label) {\n        case 0:\n          return t = \"http://\", r = \"https://\", n = \"file://\", 0 !== e.indexOf(t) && 0 !== e.indexOf(r) ? [3, 3] : [4, fetch(e)];\n\n        case 1:\n          return [4, l.sent().json()];\n\n        case 2:\n          return [2, l.sent()];\n\n        case 3:\n          return 0 !== e.indexOf(n) ? [3, 5] : (a = require(\"fs\"), i = promisify(a.readFile), s = (o = JSON).parse, [4, i(e.slice(n.length), {\n            encoding: \"utf-8\"\n          })]);\n\n        case 4:\n          return [2, s.apply(o, [l.sent()])];\n\n        case 5:\n          throw new Error(\"Unsupported URL scheme in metadata URL: \" + e + \". Supported schemes are: http://, https://, and (node.js-only) file://\");\n      }\n    });\n  });\n}\n\nvar EPSILON = null;\n\nfunction normalize(e) {\n  return null == EPSILON && (EPSILON = backend().epsilon()), tidy(function () {\n    var t = moments(e),\n        r = t.mean,\n        n = t.variance;\n    return div(sub(e, r), add(sqrt(n), EPSILON));\n  });\n}\n\nfunction normalizeFloat32Array(e) {\n  if (e.length < 2) throw new Error(\"Cannot normalize a Float32Array with fewer than 2 elements.\");\n  return null == EPSILON && (EPSILON = backend().epsilon()), tidy(function () {\n    var t = moments(tensor1d(e)),\n        r = t.mean,\n        n = t.variance,\n        a = r.arraySync(),\n        i = Math.sqrt(n.arraySync()),\n        o = Array.from(e).map(function (e) {\n      return (e - a) / (i + EPSILON);\n    });\n    return new Float32Array(o);\n  });\n}\n\nfunction getAudioContextConstructor() {\n  return window.AudioContext || window.webkitAudioContext;\n}\n\nfunction getAudioMediaStream(e) {\n  return __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (t) {\n      return [2, navigator.mediaDevices.getUserMedia({\n        audio: null == e || e,\n        video: !1\n      })];\n    });\n  });\n}\n\nfunction playRawAudio(e, t) {\n  var r = new (window.AudioContext || window.webkitAudioContext)(),\n      n = r.createBuffer(1, e.data.length, e.sampleRateHz);\n  n.getChannelData(0).set(e.data);\n  var a = r.createBufferSource();\n  a.buffer = n, a.connect(r.destination), a.start(), a.onended = function () {\n    null != t && t();\n  };\n}\n\nvar BrowserFftFeatureExtractor = function () {\n  function e(e) {\n    var t = this;\n    if (null == e) throw new Error(\"Required configuration object is missing for BrowserFftFeatureExtractor constructor\");\n    if (null == e.spectrogramCallback) throw new Error(\"spectrogramCallback cannot be null or undefined\");\n    if (!(e.numFramesPerSpectrogram > 0)) throw new Error(\"Invalid value in numFramesPerSpectrogram: \" + e.numFramesPerSpectrogram);\n    if (e.suppressionTimeMillis < 0) throw new Error(\"Expected suppressionTimeMillis to be >= 0, but got \" + e.suppressionTimeMillis);\n    if (this.suppressionTimeMillis = e.suppressionTimeMillis, this.spectrogramCallback = e.spectrogramCallback, this.numFrames = e.numFramesPerSpectrogram, this.sampleRateHz = e.sampleRateHz || 44100, this.fftSize = e.fftSize || 1024, this.frameDurationMillis = this.fftSize / this.sampleRateHz * 1e3, this.columnTruncateLength = e.columnTruncateLength || this.fftSize, this.overlapFactor = e.overlapFactor, this.includeRawAudio = e.includeRawAudio, util.assert(this.overlapFactor >= 0 && this.overlapFactor < 1, function () {\n      return \"Expected overlapFactor to be >= 0 and < 1, but got \" + t.overlapFactor;\n    }), this.columnTruncateLength > this.fftSize) throw new Error(\"columnTruncateLength \" + this.columnTruncateLength + \" exceeds fftSize (\" + this.fftSize + \").\");\n    this.audioContextConstructor = getAudioContextConstructor();\n  }\n\n  return e.prototype.start = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, r, n;\n      return __generator(this, function (a) {\n        switch (a.label) {\n          case 0:\n            if (null != this.frameIntervalTask) throw new Error(\"Cannot start already-started BrowserFftFeatureExtractor\");\n            return t = this, [4, getAudioMediaStream(e)];\n\n          case 1:\n            return t.stream = a.sent(), this.audioContext = new this.audioContextConstructor({\n              sampleRate: this.sampleRateHz\n            }), r = this.audioContext.createMediaStreamSource(this.stream), this.analyser = this.audioContext.createAnalyser(), this.analyser.fftSize = 2 * this.fftSize, this.analyser.smoothingTimeConstant = 0, r.connect(this.analyser), this.freqDataQueue = [], this.freqData = new Float32Array(this.fftSize), this.includeRawAudio && (this.timeDataQueue = [], this.timeData = new Float32Array(this.fftSize)), n = Math.max(1, Math.round(this.numFrames * (1 - this.overlapFactor))), this.tracker = new Tracker(n, Math.round(this.suppressionTimeMillis / this.frameDurationMillis)), this.frameIntervalTask = setInterval(this.onAudioFrame.bind(this), this.fftSize / this.sampleRateHz * 1e3), [2];\n        }\n      });\n    });\n  }, e.prototype.onAudioFrame = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var e, t, r, n;\n      return __generator(this, function (a) {\n        switch (a.label) {\n          case 0:\n            return this.analyser.getFloatFrequencyData(this.freqData), this.freqData[0] === -1 / 0 ? [2] : (this.freqDataQueue.push(this.freqData.slice(0, this.columnTruncateLength)), this.includeRawAudio && (this.analyser.getFloatTimeDomainData(this.timeData), this.timeDataQueue.push(this.timeData.slice())), this.freqDataQueue.length > this.numFrames && this.freqDataQueue.shift(), this.tracker.tick() ? (e = flattenQueue(this.freqDataQueue), t = getInputTensorFromFrequencyData(e, [1, this.numFrames, this.columnTruncateLength, 1]), r = void 0, this.includeRawAudio && (n = flattenQueue(this.timeDataQueue), r = getInputTensorFromFrequencyData(n, [1, this.numFrames * this.fftSize])), [4, this.spectrogramCallback(t, r)]) : [3, 2]);\n\n          case 1:\n            a.sent() && this.tracker.suppress(), dispose([t, r]), a.label = 2;\n\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.stop = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (e) {\n        if (null == this.frameIntervalTask) throw new Error(\"Cannot stop because there is no ongoing streaming activity.\");\n        return clearInterval(this.frameIntervalTask), this.frameIntervalTask = null, this.analyser.disconnect(), this.audioContext.close(), null != this.stream && this.stream.getTracks().length > 0 && this.stream.getTracks()[0].stop(), [2];\n      });\n    });\n  }, e.prototype.setConfig = function (e) {\n    throw new Error(\"setConfig() is not implemented for BrowserFftFeatureExtractor.\");\n  }, e.prototype.getFeatures = function () {\n    throw new Error(\"getFeatures() is not implemented for BrowserFftFeatureExtractor. Use the spectrogramCallback field of the constructor config instead.\");\n  }, e;\n}();\n\nfunction flattenQueue(e) {\n  var t = e[0].length,\n      r = new Float32Array(e.length * t);\n  return e.forEach(function (e, n) {\n    return r.set(e, n * t);\n  }), r;\n}\n\nfunction getInputTensorFromFrequencyData(e, t) {\n  var r = new Float32Array(util.sizeFromShape(t));\n  return r.set(e, r.length - e.length), tensor(r, t);\n}\n\nvar Tracker = function () {\n  function e(e, t) {\n    var r = this;\n    this.period = e, this.suppressionTime = null == t ? 0 : t, this.counter = 0, util.assert(this.period > 0, function () {\n      return \"Expected period to be positive, but got \" + r.period;\n    });\n  }\n\n  return e.prototype.tick = function () {\n    return this.counter++, this.counter % this.period == 0 && (null == this.suppressionOnset || this.counter - this.suppressionOnset > this.suppressionTime);\n  }, e.prototype.suppress = function () {\n    this.suppressionOnset = this.counter;\n  }, e;\n}();\n\nfunction concatenateArrayBuffers(e) {\n  var t = 0;\n  e.forEach(function (e) {\n    t += e.byteLength;\n  });\n  var r = new Uint8Array(t),\n      n = 0;\n  return e.forEach(function (e) {\n    r.set(new Uint8Array(e), n), n += e.byteLength;\n  }), r.buffer;\n}\n\nfunction concatenateFloat32Arrays(e) {\n  var t = 0;\n  e.forEach(function (e) {\n    return t += e.length;\n  });\n  var r = new Float32Array(t),\n      n = 0;\n  return e.forEach(function (e) {\n    r.set(e, n), n += e.length;\n  }), r;\n}\n\nfunction string2ArrayBuffer(e) {\n  if (null == e) throw new Error(\"Received null or undefind string\");\n\n  for (var t = unescape(encodeURIComponent(e)), r = new Uint8Array(t.length), n = 0; n < t.length; ++n) r[n] = t.charCodeAt(n);\n\n  return r.buffer;\n}\n\nfunction arrayBuffer2String(e) {\n  if (null == e) throw new Error(\"Received null or undefind buffer\");\n  var t = new Uint8Array(e);\n  return decodeURIComponent(escape(String.fromCharCode.apply(String, __spread(t))));\n}\n\nfunction getUID() {\n  function e() {\n    return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);\n  }\n\n  return e() + e() + \"-\" + e() + \"-\" + e() + \"-\" + e() + \"-\" + e() + e() + e();\n}\n\nfunction getRandomInteger(e, t) {\n  return Math.floor((t - e) * Math.random()) + e;\n}\n\nfunction balancedTrainValSplit(e, t, r) {\n  return util.assert(r > 0 && r < 1, function () {\n    return \"validationSplit is expected to be >0 and <1, but got \" + r;\n  }), tidy(function () {\n    for (var n = argMax(t, -1).dataSync(), a = [], i = 0; i < n.length; ++i) {\n      var o = n[i];\n      null == a[o] && (a[o] = []), a[o].push(i);\n    }\n\n    var s = a.length,\n        l = [],\n        u = [];\n    a.map(function (e) {\n      return util.shuffle(e);\n    });\n\n    for (i = 0; i < s; ++i) for (var c = a[i], h = Math.round(c.length * (1 - r)), d = 0; d < c.length; ++d) d < h ? l.push(c[d]) : u.push(c[d]);\n\n    return {\n      trainXs: gather(e, l),\n      trainYs: gather(t, l),\n      valXs: gather(e, u),\n      valYs: gather(t, u)\n    };\n  });\n}\n\nfunction balancedTrainValSplitNumArrays(e, t, r) {\n  var n, a, i, o, s, l, u, c;\n  util.assert(r > 0 && r < 1, function () {\n    return \"validationSplit is expected to be >0 and <1, but got \" + r;\n  });\n\n  for (var h = !Array.isArray(e[0]), d = t, p = [], f = 0; f < d.length; ++f) {\n    var m = d[f];\n    null == p[m] && (p[m] = []), p[m].push(f);\n  }\n\n  var g = p.length,\n      v = [],\n      y = [];\n  p.map(function (e) {\n    return util.shuffle(e);\n  });\n\n  for (f = 0; f < g; ++f) for (var w = p[f], b = Math.round(w.length * (1 - r)), _ = 0; _ < w.length; ++_) _ < b ? v.push(w[_]) : y.push(w[_]);\n\n  if (h) {\n    var S = [],\n        E = [],\n        x = [],\n        A = [];\n\n    try {\n      for (var T = __values(v), I = T.next(); !I.done; I = T.next()) {\n        var D = I.value;\n        S.push(e[D]), E.push(t[D]);\n      }\n    } catch (e) {\n      n = {\n        error: e\n      };\n    } finally {\n      try {\n        I && !I.done && (a = T.return) && a.call(T);\n      } finally {\n        if (n) throw n.error;\n      }\n    }\n\n    try {\n      for (var F = __values(y), O = F.next(); !O.done; O = F.next()) {\n        D = O.value;\n        x.push(e[D]), A.push(t[D]);\n      }\n    } catch (e) {\n      i = {\n        error: e\n      };\n    } finally {\n      try {\n        O && !O.done && (o = F.return) && o.call(F);\n      } finally {\n        if (i) throw i.error;\n      }\n    }\n\n    return {\n      trainXs: S,\n      trainYs: E,\n      valXs: x,\n      valYs: A\n    };\n  }\n\n  S = [], E = [], x = [], A = [];\n\n  try {\n    for (var M = __values(v), z = M.next(); !z.done; z = M.next()) {\n      D = z.value;\n      S.push(e[D]), E.push(t[D]);\n    }\n  } catch (e) {\n    s = {\n      error: e\n    };\n  } finally {\n    try {\n      z && !z.done && (l = M.return) && l.call(M);\n    } finally {\n      if (s) throw s.error;\n    }\n  }\n\n  try {\n    for (var R = __values(y), L = R.next(); !L.done; L = R.next()) {\n      D = L.value;\n      x.push(e[D]), A.push(t[D]);\n    }\n  } catch (e) {\n    u = {\n      error: e\n    };\n  } finally {\n    try {\n      L && !L.done && (c = R.return) && c.call(R);\n    } finally {\n      if (u) throw u.error;\n    }\n  }\n\n  return {\n    trainXs: S,\n    trainYs: E,\n    valXs: x,\n    valYs: A\n  };\n}\n\nvar DATASET_SERIALIZATION_DESCRIPTOR = \"TFJSSCDS\",\n    DATASET_SERIALIZATION_VERSION = 1,\n    BACKGROUND_NOISE_TAG = \"_background_noise_\",\n    Dataset = function () {\n  function e(e) {\n    if (this.examples = {}, this.label2Ids = {}, null != e) for (var t = arrayBuffer2SerializedExamples(e), r = 0, n = 0; n < t.manifest.length; ++n) {\n      var a = t.manifest[n],\n          i = a.spectrogramNumFrames * a.spectrogramFrameSize;\n      null != a.rawAudioNumSamples && (i += a.rawAudioNumSamples), i *= 4, this.addExample(deserializeExample({\n        spec: a,\n        data: t.data.slice(r, r + i)\n      })), r += i;\n    }\n  }\n\n  return e.prototype.addExample = function (e) {\n    util.assert(null != e, function () {\n      return \"Got null or undefined example\";\n    }), util.assert(null != e.label && e.label.length > 0, function () {\n      return \"Expected label to be a non-empty string, but got \" + JSON.stringify(e.label);\n    });\n    var t = getUID();\n    return this.examples[t] = e, e.label in this.label2Ids || (this.label2Ids[e.label] = []), this.label2Ids[e.label].push(t), t;\n  }, e.prototype.merge = function (e) {\n    var t, r, n, a;\n    util.assert(e !== this, function () {\n      return \"Cannot merge a dataset into itself\";\n    });\n    var i = e.getVocabulary();\n\n    try {\n      for (var o = __values(i), s = o.next(); !s.done; s = o.next()) {\n        var l = s.value,\n            u = e.getExamples(l);\n\n        try {\n          for (var c = (n = void 0, __values(u)), h = c.next(); !h.done; h = c.next()) {\n            var d = h.value;\n            this.addExample(d.example);\n          }\n        } catch (e) {\n          n = {\n            error: e\n          };\n        } finally {\n          try {\n            h && !h.done && (a = c.return) && a.call(c);\n          } finally {\n            if (n) throw n.error;\n          }\n        }\n      }\n    } catch (e) {\n      t = {\n        error: e\n      };\n    } finally {\n      try {\n        s && !s.done && (r = o.return) && r.call(o);\n      } finally {\n        if (t) throw t.error;\n      }\n    }\n  }, e.prototype.getExampleCounts = function () {\n    var e = {};\n\n    for (var t in this.examples) {\n      var r = this.examples[t];\n      r.label in e || (e[r.label] = 0), e[r.label]++;\n    }\n\n    return e;\n  }, e.prototype.getExamples = function (e) {\n    var t = this;\n    util.assert(null != e, function () {\n      return \"Expected label to be a string, but got \" + JSON.stringify(e);\n    }), util.assert(e in this.label2Ids, function () {\n      return 'No example of label \"' + e + '\" exists in dataset';\n    });\n    var r = [];\n    return this.label2Ids[e].forEach(function (e) {\n      r.push({\n        uid: e,\n        example: t.examples[e]\n      });\n    }), r;\n  }, e.prototype.getData = function (e, t) {\n    var r = this;\n    util.assert(this.size() > 0, function () {\n      return \"Cannot get spectrograms as tensors because the dataset is empty\";\n    });\n    var n = this.getVocabulary();\n    null != e ? util.assert(-1 !== n.indexOf(e), function () {\n      return \"Label \" + e + \" is not in the vocabulary (\" + JSON.stringify(n) + \")\";\n    }) : util.assert(n.length > 1, function () {\n      return \"One-hot encoding of labels requires the vocabulary to have at least two words, but it has only \" + n.length + \" word.\";\n    }), null == t && (t = {});\n    var a,\n        i,\n        o = this.getSortedUniqueNumFrames();\n    1 === o.length ? (a = null == t.numFrames ? o[0] : t.numFrames, i = null == t.hopFrames ? 1 : t.hopFrames) : (a = t.numFrames, util.assert(null != a && Number.isInteger(a) && a > 0, function () {\n      return \"There are \" + o.length + \" unique lengths among the \" + r.size() + \" examples of this Dataset, hence numFrames is required. But it is not provided.\";\n    }), util.assert(a <= o[0], function () {\n      return \"numFrames (\" + a + \") exceeds the minimum numFrames (\" + o[0] + \") among the examples of the Dataset.\";\n    }), i = t.hopFrames, util.assert(null != i && Number.isInteger(i) && i > 0, function () {\n      return \"There are \" + o.length + \" unique lengths among the \" + r.size() + \" examples of this Dataset, hence hopFrames is required. But it is not provided.\";\n    }));\n    var s = null == t.normalize || t.normalize;\n    return tidy(function () {\n      for (var o, l, u, c = [], h = [], d = [], p = 0; p < n.length; ++p) {\n        var f = n[p];\n\n        if (null == e || f === e) {\n          var m = r.label2Ids[f],\n              g = function (n) {\n            var o,\n                l,\n                m = r.examples[n].spectrogram,\n                g = m.frameSize;\n            null == u ? u = g : util.assert(g === u, function () {\n              return \"Mismatch in frameSize  (\" + g + \" vs \" + u + \")\";\n            });\n            var v = m.data.length / g,\n                y = null;\n            f !== BACKGROUND_NOISE_TAG && (y = null == m.keyFrameIndex ? getMaxIntensityFrameIndex(m).dataSync()[0] : m.keyFrameIndex);\n\n            var w = tensor3d(m.data, [v, g, 1]),\n                b = getValidWindows(v, y, a, i),\n                _ = function (r) {\n              var n = tidy(function () {\n                var e = slice(w, [r[0], 0, 0], [r[1] - r[0], -1, -1]);\n                return s ? normalize(e) : e;\n              });\n              t.getDataset ? h.push(n.dataSync()) : c.push(n), null == e && d.push(p);\n            };\n\n            try {\n              for (var S = (o = void 0, __values(b)), E = S.next(); !E.done; E = S.next()) {\n                _(E.value);\n              }\n            } catch (e) {\n              o = {\n                error: e\n              };\n            } finally {\n              try {\n                E && !E.done && (l = S.return) && l.call(S);\n              } finally {\n                if (o) throw o.error;\n              }\n            }\n\n            dispose(w);\n          };\n\n          try {\n            for (var v = (o = void 0, __values(m)), y = v.next(); !y.done; y = v.next()) {\n              g(y.value);\n            }\n          } catch (e) {\n            o = {\n              error: e\n            };\n          } finally {\n            try {\n              y && !y.done && (l = v.return) && l.call(v);\n            } finally {\n              if (o) throw o.error;\n            }\n          }\n        }\n      }\n\n      null != t.augmentByMixingNoiseRatio && r.augmentByMixingNoise(t.getDataset ? h : c, d, t.augmentByMixingNoiseRatio);\n      var w = null == t.shuffle || t.shuffle;\n\n      if (t.getDataset) {\n        var b = null == t.datasetBatchSize ? 32 : t.datasetBatchSize,\n            _ = null == t.datasetValidationSplit ? .15 : t.datasetValidationSplit;\n\n        util.assert(_ > 0 && _ < 1, function () {\n          return \"Invalid dataset validation split: \" + _;\n        });\n        var S = h.map(function (e, t) {\n          return [e, d[t]];\n        });\n        util.shuffle(S), h = S.map(function (e) {\n          return e[0];\n        });\n        var E = S.map(function (e) {\n          return e[1];\n        }),\n            x = balancedTrainValSplitNumArrays(h, E, _),\n            A = x.trainXs,\n            T = x.trainYs,\n            I = x.valXs,\n            D = x.valYs,\n            F = array(A).map(function (e) {\n          return tensor3d(e, [a, u, 1]);\n        }),\n            O = array(T).map(function (e) {\n          return squeeze(oneHot([e], n.length), [0]);\n        }),\n            M = zip({\n          xs: F,\n          ys: O\n        });\n        w && (M = M.shuffle(h.length)), M = M.batch(b).prefetch(4);\n        var z = array(I).map(function (e) {\n          return tensor3d(e, [a, u, 1]);\n        }),\n            R = array(D).map(function (e) {\n          return squeeze(oneHot([e], n.length), [0]);\n        }),\n            L = zip({\n          xs: z,\n          ys: R\n        });\n        return [M, L = L.batch(b).prefetch(4)];\n      }\n\n      if (w) {\n        var N = [];\n        c.forEach(function (e, t) {\n          N.push({\n            x: e,\n            y: d[t]\n          });\n        }), util.shuffle(N), c = N.map(function (e) {\n          return e.x;\n        }), d = N.map(function (e) {\n          return e.y;\n        });\n      }\n\n      var C = null == e ? cast(oneHot(tensor1d(d, \"int32\"), n.length), \"float32\") : void 0;\n      return {\n        xs: stack(c),\n        ys: C\n      };\n    });\n  }, e.prototype.augmentByMixingNoise = function (e, t, r) {\n    var n, a;\n    if (null == e || 0 === e.length) throw new Error(\"Cannot perform augmentation because data is null or empty\");\n\n    for (var i = e[0] instanceof Float32Array, o = this.getVocabulary(), s = [], l = [], u = 0; u < t.length; ++u) o[t[u]] === BACKGROUND_NOISE_TAG ? s.push(u) : l.push(u);\n\n    if (0 === s.length) throw new Error(\"Cannot perform augmentation by mixing with noise when there is no example with label \" + BACKGROUND_NOISE_TAG);\n\n    var c = [],\n        h = [],\n        d = function (n) {\n      var a = s[getRandomInteger(0, s.length)],\n          o = i ? tensor1d(e[n]) : e[n],\n          l = i ? tensor1d(e[a]) : e[a],\n          u = tidy(function () {\n        return normalize(add(o, mul(l, r)));\n      });\n      i ? c.push(u.dataSync()) : c.push(u), h.push(t[n]);\n    };\n\n    try {\n      for (var p = __values(l), f = p.next(); !f.done; f = p.next()) {\n        d(f.value);\n      }\n    } catch (e) {\n      n = {\n        error: e\n      };\n    } finally {\n      try {\n        f && !f.done && (a = p.return) && a.call(p);\n      } finally {\n        if (n) throw n.error;\n      }\n    }\n\n    console.log(\"Data augmentation: mixing noise: added \" + c.length + \" examples\"), c.forEach(function (t) {\n      return e.push(t);\n    }), t.push.apply(t, __spread(h));\n  }, e.prototype.getSortedUniqueNumFrames = function () {\n    for (var e, t, r = new Set(), n = this.getVocabulary(), a = 0; a < n.length; ++a) {\n      var i = n[a],\n          o = this.label2Ids[i];\n\n      try {\n        for (var s = (e = void 0, __values(o)), l = s.next(); !l.done; l = s.next()) {\n          var u = l.value,\n              c = this.examples[u].spectrogram,\n              h = c.data.length / c.frameSize;\n          r.add(h);\n        }\n      } catch (t) {\n        e = {\n          error: t\n        };\n      } finally {\n        try {\n          l && !l.done && (t = s.return) && t.call(s);\n        } finally {\n          if (e) throw e.error;\n        }\n      }\n    }\n\n    var d = __spread(r);\n\n    return d.sort(), d;\n  }, e.prototype.removeExample = function (e) {\n    if (!(e in this.examples)) throw new Error(\"Nonexistent example UID: \" + e);\n    var t = this.examples[e].label;\n    delete this.examples[e];\n    var r = this.label2Ids[t].indexOf(e);\n    this.label2Ids[t].splice(r, 1), 0 === this.label2Ids[t].length && delete this.label2Ids[t];\n  }, e.prototype.setExampleKeyFrameIndex = function (e, t) {\n    if (!(e in this.examples)) throw new Error(\"Nonexistent example UID: \" + e);\n    var r = this.examples[e].spectrogram,\n        n = r.data.length / r.frameSize;\n    util.assert(t >= 0 && t < n && Number.isInteger(t), function () {\n      return \"Invalid keyFrameIndex: \" + t + \". Must be >= 0, < \" + n + \", and an integer.\";\n    }), r.keyFrameIndex = t;\n  }, e.prototype.size = function () {\n    return Object.keys(this.examples).length;\n  }, e.prototype.durationMillis = function () {\n    var e = 0;\n\n    for (var t in this.examples) {\n      var r = this.examples[t].spectrogram,\n          n = 23.22 | r.frameDurationMillis;\n      e += r.data.length / r.frameSize * n;\n    }\n\n    return e;\n  }, e.prototype.empty = function () {\n    return 0 === this.size();\n  }, e.prototype.clear = function () {\n    this.examples = {};\n  }, e.prototype.getVocabulary = function () {\n    var e = new Set();\n\n    for (var t in this.examples) {\n      var r = this.examples[t];\n      e.add(r.label);\n    }\n\n    var n = __spread(e);\n\n    return n.sort(), n;\n  }, e.prototype.serialize = function (e) {\n    var t,\n        r,\n        n,\n        a,\n        i = this.getVocabulary();\n    util.assert(!this.empty(), function () {\n      return \"Cannot serialize empty Dataset\";\n    }), null != e && (Array.isArray(e) || (e = [e]), e.forEach(function (e) {\n      if (-1 === i.indexOf(e)) throw new Error('Word label \"' + e + '\" does not exist in the vocabulary of this dataset. The vocabulary is: ' + JSON.stringify(i) + \".\");\n    }));\n    var o = [],\n        s = [];\n\n    try {\n      for (var l = __values(i), u = l.next(); !u.done; u = l.next()) {\n        var c = u.value;\n\n        if (null == e || -1 !== e.indexOf(c)) {\n          var h = this.label2Ids[c];\n\n          try {\n            for (var d = (n = void 0, __values(h)), p = d.next(); !p.done; p = d.next()) {\n              var f = p.value,\n                  m = serializeExample(this.examples[f]);\n              o.push(m.spec), s.push(m.data);\n            }\n          } catch (e) {\n            n = {\n              error: e\n            };\n          } finally {\n            try {\n              p && !p.done && (a = d.return) && a.call(d);\n            } finally {\n              if (n) throw n.error;\n            }\n          }\n        }\n      }\n    } catch (e) {\n      t = {\n        error: e\n      };\n    } finally {\n      try {\n        u && !u.done && (r = l.return) && r.call(l);\n      } finally {\n        if (t) throw t.error;\n      }\n    }\n\n    return serializedExamples2ArrayBuffer({\n      manifest: o,\n      data: concatenateArrayBuffers(s)\n    });\n  }, e;\n}();\n\nfunction serializeExample(e) {\n  var t = null != e.rawAudio,\n      r = {\n    label: e.label,\n    spectrogramNumFrames: e.spectrogram.data.length / e.spectrogram.frameSize,\n    spectrogramFrameSize: e.spectrogram.frameSize\n  };\n  null != e.spectrogram.keyFrameIndex && (r.spectrogramKeyFrameIndex = e.spectrogram.keyFrameIndex);\n  var n = e.spectrogram.data.buffer.slice(0);\n  return t && (r.rawAudioNumSamples = e.rawAudio.data.length, r.rawAudioSampleRateHz = e.rawAudio.sampleRateHz, n = concatenateArrayBuffers([n, e.rawAudio.data.buffer])), {\n    spec: r,\n    data: n\n  };\n}\n\nfunction deserializeExample(e) {\n  var t = {\n    frameSize: e.spec.spectrogramFrameSize,\n    data: new Float32Array(e.data.slice(0, 4 * e.spec.spectrogramFrameSize * e.spec.spectrogramNumFrames))\n  };\n  null != e.spec.spectrogramKeyFrameIndex && (t.keyFrameIndex = e.spec.spectrogramKeyFrameIndex);\n  var r = {\n    label: e.spec.label,\n    spectrogram: t\n  };\n  return null != e.spec.rawAudioNumSamples && (r.rawAudio = {\n    sampleRateHz: e.spec.rawAudioSampleRateHz,\n    data: new Float32Array(e.data.slice(4 * e.spec.spectrogramFrameSize * e.spec.spectrogramNumFrames))\n  }), r;\n}\n\nfunction serializedExamples2ArrayBuffer(e) {\n  var t = string2ArrayBuffer(JSON.stringify(e.manifest)),\n      r = string2ArrayBuffer(DATASET_SERIALIZATION_DESCRIPTOR),\n      n = new Uint32Array([DATASET_SERIALIZATION_VERSION]),\n      a = new Uint32Array([t.byteLength]);\n  return concatenateArrayBuffers([concatenateArrayBuffers([r, n.buffer, a.buffer]), t, e.data]);\n}\n\nfunction arrayBuffer2SerializedExamples(e) {\n  util.assert(null != e, function () {\n    return \"Received null or undefined buffer\";\n  });\n  var t = 0,\n      r = arrayBuffer2String(e.slice(t, DATASET_SERIALIZATION_DESCRIPTOR.length));\n  util.assert(r === DATASET_SERIALIZATION_DESCRIPTOR, function () {\n    return \"Deserialization error: Invalid descriptor\";\n  }), t += DATASET_SERIALIZATION_DESCRIPTOR.length, t += 4;\n  var n = new Uint32Array(e, t, 1),\n      a = t += 4;\n  t = a + n[0];\n  var i = arrayBuffer2String(e.slice(a, t));\n  return {\n    manifest: JSON.parse(i),\n    data: e.slice(t)\n  };\n}\n\nfunction getValidWindows(e, t, r, n) {\n  if (util.assert(Number.isInteger(e) && e > 0, function () {\n    return \"snippetLength must be a positive integer, but got \" + e;\n  }), null != t && util.assert(Number.isInteger(t) && t >= 0, function () {\n    return \"focusIndex must be a non-negative integer, but got \" + t;\n  }), util.assert(Number.isInteger(r) && r > 0, function () {\n    return \"windowLength must be a positive integer, but got \" + r;\n  }), util.assert(Number.isInteger(n) && n > 0, function () {\n    return \"windowHop must be a positive integer, but got \" + n;\n  }), util.assert(r <= e, function () {\n    return \"windowLength (\" + r + \") exceeds snippetLength (\" + e + \")\";\n  }), util.assert(t < e, function () {\n    return \"focusIndex (\" + t + \") equals or exceeds snippetLength (\" + e + \")\";\n  }), r === e) return [[0, e]];\n  var a = [];\n\n  if (null == t) {\n    for (var i = 0; i + r <= e;) a.push([i, i + r]), i += n;\n\n    return a;\n  }\n\n  var o = Math.floor(r / 2),\n      s = t - o;\n\n  for (s < 0 ? s = 0 : s + r > e && (s = e - r); !(s - n < 0 || t >= s - n + r);) s -= n;\n\n  for (; s + r <= e && !(t < s);) a.push([s, s + r]), s += n;\n\n  return a;\n}\n\nfunction spectrogram2IntensityCurve(e) {\n  return tidy(function () {\n    var t = e.data.length / e.frameSize,\n        r = tensor2d(e.data, [t, e.frameSize]);\n    return mean(r, -1);\n  });\n}\n\nfunction getMaxIntensityFrameIndex(e) {\n  return tidy(function () {\n    return argMax(spectrogram2IntensityCurve(e));\n  });\n}\n\nvar version = \"0.5.4\",\n    UNKNOWN_TAG = \"_unknown_\",\n    SAVED_MODEL_METADATA_KEY = \"tfjs-speech-commands-saved-model-metadata\",\n    SAVE_PATH_PREFIX = \"indexeddb://tfjs-speech-commands-model/\",\n    localStorageWrapper = {\n  localStorage: \"undefined\" == typeof window ? null : window.localStorage\n};\n\nfunction getMajorAndMinorVersion(e) {\n  return e.split(\".\").slice(0, 2).join(\".\");\n}\n\nvar DEFAULT_WINDOW_HOP_RATIO = .25,\n    BrowserFftSpeechCommandRecognizer = function () {\n  function e(t, r, n) {\n    this.MODEL_URL_PREFIX = \"https://storage.googleapis.com/tfjs-models/tfjs/speech-commands/v\" + getMajorAndMinorVersion(version) + \"/browser_fft\", this.SAMPLE_RATE_HZ = 44100, this.FFT_SIZE = 1024, this.DEFAULT_SUPPRESSION_TIME_MILLIS = 0, this.streaming = !1, this.transferRecognizers = {}, util.assert(null == r && null == n || null != r && null != n, function () {\n      return \"modelURL and metadataURL must be both provided or both not provided.\";\n    }), null == r ? (null == t ? t = e.DEFAULT_VOCABULARY_NAME : util.assert(-1 !== e.VALID_VOCABULARY_NAMES.indexOf(t), function () {\n      return \"Invalid vocabulary name: '\" + t + \"'\";\n    }), this.vocabulary = t, this.modelArtifactsOrURL = this.MODEL_URL_PREFIX + \"/\" + this.vocabulary + \"/model.json\", this.metadataOrURL = this.MODEL_URL_PREFIX + \"/\" + this.vocabulary + \"/metadata.json\") : (util.assert(null == t, function () {\n      return \"vocabulary name must be null or undefined when modelURL is provided\";\n    }), this.modelArtifactsOrURL = r, this.metadataOrURL = n), this.parameters = {\n      sampleRateHz: this.SAMPLE_RATE_HZ,\n      fftSize: this.FFT_SIZE\n    };\n  }\n\n  return e.prototype.listen = function (e, t) {\n    return __awaiter(this, void 0, void 0, function () {\n      var r,\n          n,\n          a,\n          i,\n          o,\n          s = this;\n      return __generator(this, function (l) {\n        switch (l.label) {\n          case 0:\n            if (this.streaming) throw new Error(\"Cannot start streaming again when streaming is ongoing.\");\n            return [4, this.ensureModelLoaded()];\n\n          case 1:\n            if (l.sent(), null == t && (t = {}), r = null == t.probabilityThreshold ? 0 : t.probabilityThreshold, t.includeEmbedding && (r = 0), util.assert(r >= 0 && r <= 1, function () {\n              return \"Invalid probabilityThreshold value: \" + r;\n            }), n = null != t.invokeCallbackOnNoiseAndUnknown && t.invokeCallbackOnNoiseAndUnknown, t.includeEmbedding && (n = !0), t.suppressionTimeMillis < 0) throw new Error(\"suppressionTimeMillis is expected to be >= 0, but got \" + t.suppressionTimeMillis);\n            return a = null == t.overlapFactor ? .5 : t.overlapFactor, util.assert(a >= 0 && a < 1, function () {\n              return \"Expected overlapFactor to be >= 0 and < 1, but got \" + a;\n            }), i = function (a, i) {\n              return __awaiter(s, void 0, void 0, function () {\n                var i, o, s, l, u, c, h, d, p, f, m;\n                return __generator(this, function (g) {\n                  switch (g.label) {\n                    case 0:\n                      return i = normalize(a), t.includeEmbedding ? [4, this.ensureModelWithEmbeddingOutputCreated()] : [3, 2];\n\n                    case 1:\n                      return g.sent(), m = __read(this.modelWithEmbeddingOutput.predict(i), 2), o = m[0], s = m[1], [3, 3];\n\n                    case 2:\n                      o = this.model.predict(i), g.label = 3;\n\n                    case 3:\n                      return [4, o.data()];\n\n                    case 4:\n                      return l = g.sent(), [4, (u = o.argMax(-1)).data()];\n\n                    case 5:\n                      return c = g.sent()[0], h = Math.max.apply(Math, __spread(l)), dispose([o, u, i]), h < r ? [2, !1] : [3, 6];\n\n                    case 6:\n                      return d = void 0, t.includeSpectrogram ? (p = {}, [4, a.data()]) : [3, 8];\n\n                    case 7:\n                      p.data = g.sent(), p.frameSize = this.nonBatchInputShape[1], d = p, g.label = 8;\n\n                    case 8:\n                      return f = !0, n || this.words[c] !== BACKGROUND_NOISE_TAG && this.words[c] !== UNKNOWN_TAG || (f = !1), f && e({\n                        scores: l,\n                        spectrogram: d,\n                        embedding: s\n                      }), [2, f];\n                  }\n                });\n              });\n            }, o = null == t.suppressionTimeMillis ? this.DEFAULT_SUPPRESSION_TIME_MILLIS : t.suppressionTimeMillis, this.audioDataExtractor = new BrowserFftFeatureExtractor({\n              sampleRateHz: this.parameters.sampleRateHz,\n              numFramesPerSpectrogram: this.nonBatchInputShape[0],\n              columnTruncateLength: this.nonBatchInputShape[1],\n              suppressionTimeMillis: o,\n              spectrogramCallback: i,\n              overlapFactor: a\n            }), [4, this.audioDataExtractor.start(t.audioTrackConstraints)];\n\n          case 2:\n            return l.sent(), this.streaming = !0, [2];\n        }\n      });\n    });\n  }, e.prototype.ensureModelLoaded = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var e,\n          t,\n          r,\n          n,\n          a = this;\n      return __generator(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return null != this.model ? [2] : [4, this.ensureMetadataLoaded()];\n\n          case 1:\n            return i.sent(), \"string\" != typeof this.modelArtifactsOrURL ? [3, 3] : [4, loadLayersModel(this.modelArtifactsOrURL)];\n\n          case 2:\n            return e = i.sent(), [3, 5];\n\n          case 3:\n            return [4, loadLayersModel(io.fromMemory(this.modelArtifactsOrURL.modelTopology, this.modelArtifactsOrURL.weightSpecs, this.modelArtifactsOrURL.weightData))];\n\n          case 4:\n            e = i.sent(), i.label = 5;\n\n          case 5:\n            if (1 !== e.inputs.length) throw new Error(\"Expected model to have 1 input, but got a model with \" + e.inputs.length + \" inputs\");\n            if (4 !== e.inputs[0].shape.length) throw new Error(\"Expected model to have an input shape of rank 4, but got an input shape of rank \" + e.inputs[0].shape.length);\n            if (1 !== e.inputs[0].shape[3]) throw new Error(\"Expected model to have an input shape with 1 as the last dimension, but got input shape\" + JSON.stringify(e.inputs[0].shape[3]) + \"}\");\n            if (2 !== (t = e.outputShape).length) throw new Error(\"Expected loaded model to have an output shape of rank 2,but received shape \" + JSON.stringify(t));\n            if (t[1] !== this.words.length) throw new Error(\"Mismatch between the last dimension of model's output shape (\" + t[1] + \") and number of words (\" + this.words.length + \").\");\n            return this.model = e, this.freezeModel(), this.nonBatchInputShape = e.inputs[0].shape.slice(1), this.elementsPerExample = 1, e.inputs[0].shape.slice(1).forEach(function (e) {\n              return a.elementsPerExample *= e;\n            }), this.warmUpModel(), r = this.parameters.fftSize / this.parameters.sampleRateHz * 1e3, n = e.inputs[0].shape[1], this.parameters.spectrogramDurationMillis = n * r, [2];\n        }\n      });\n    });\n  }, e.prototype.ensureModelWithEmbeddingOutputCreated = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var e, t;\n      return __generator(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return null != this.modelWithEmbeddingOutput ? [2] : [4, this.ensureModelLoaded()];\n\n          case 1:\n            for (r.sent(), t = this.model.layers.length - 2; t >= 0; --t) if (\"Dense\" === this.model.layers[t].getClassName()) {\n              e = this.model.layers[t];\n              break;\n            }\n\n            if (null == e) throw new Error(\"Failed to find second last dense layer in the original model.\");\n            return this.modelWithEmbeddingOutput = model({\n              inputs: this.model.inputs,\n              outputs: [this.model.outputs[0], e.output]\n            }), [2];\n        }\n      });\n    });\n  }, e.prototype.warmUpModel = function () {\n    var e = this;\n    tidy(function () {\n      for (var t = zeros([1].concat(e.nonBatchInputShape)), r = 0; r < 3; ++r) e.model.predict(t);\n    });\n  }, e.prototype.ensureMetadataLoaded = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var e, t, r;\n      return __generator(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return null != this.words ? [2] : \"string\" != typeof this.metadataOrURL ? [3, 2] : [4, loadMetadataJson(this.metadataOrURL)];\n\n          case 1:\n            return t = n.sent(), [3, 3];\n\n          case 2:\n            t = this.metadataOrURL, n.label = 3;\n\n          case 3:\n            if (null == (e = t).wordLabels) {\n              if (null == (r = e.words)) throw new Error('Cannot find field \"words\" or \"wordLabels\" in metadata JSON file');\n              this.words = r;\n            } else this.words = e.wordLabels;\n\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.stopListening = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (e) {\n        switch (e.label) {\n          case 0:\n            if (!this.streaming) throw new Error(\"Cannot stop streaming when streaming is not ongoing.\");\n            return [4, this.audioDataExtractor.stop()];\n\n          case 1:\n            return e.sent(), this.streaming = !1, [2];\n        }\n      });\n    });\n  }, e.prototype.isListening = function () {\n    return this.streaming;\n  }, e.prototype.wordLabels = function () {\n    return this.words;\n  }, e.prototype.params = function () {\n    return this.parameters;\n  }, e.prototype.modelInputShape = function () {\n    if (null == this.model) throw new Error(\"Model has not been loaded yet. Load model by calling ensureModelLoaded(), recognize(), or listen().\");\n    return this.model.inputs[0].shape;\n  }, e.prototype.recognize = function (e, t) {\n    return __awaiter(this, void 0, void 0, function () {\n      var r, n, a, i, o, s, l, u, c, h, d, p, f;\n      return __generator(this, function (m) {\n        switch (m.label) {\n          case 0:\n            return null == t && (t = {}), [4, this.ensureModelLoaded()];\n\n          case 1:\n            return m.sent(), null != e ? [3, 3] : [4, this.recognizeOnline()];\n\n          case 2:\n            r = m.sent(), e = r.data, m.label = 3;\n\n          case 3:\n            if (e instanceof Tensor) this.checkInputTensorShape(e), a = e, n = e.shape[0];else {\n              if (e.length % this.elementsPerExample) throw new Error(\"The length of the input Float32Array \" + e.length + \" is not divisible by the number of tensor elements per per example expected by the model \" + this.elementsPerExample + \".\");\n              n = e.length / this.elementsPerExample, a = tensor4d(e, [n].concat(this.nonBatchInputShape));\n            }\n            return o = {\n              scores: null\n            }, t.includeEmbedding ? [4, this.ensureModelWithEmbeddingOutputCreated()] : [3, 5];\n\n          case 4:\n            return m.sent(), s = this.modelWithEmbeddingOutput.predict(a), i = s[0], o.embedding = s[1], [3, 6];\n\n          case 5:\n            i = this.model.predict(a), m.label = 6;\n\n          case 6:\n            return 1 !== n ? [3, 8] : (l = o, [4, i.data()]);\n\n          case 7:\n            return l.scores = m.sent(), [3, 10];\n\n          case 8:\n            return u = unstack(i), c = u.map(function (e) {\n              return e.data();\n            }), h = o, [4, Promise.all(c)];\n\n          case 9:\n            h.scores = m.sent(), dispose(u), m.label = 10;\n\n          case 10:\n            return t.includeSpectrogram ? (d = o, p = {}, e instanceof Tensor ? [4, e.data()] : [3, 12]) : [3, 14];\n\n          case 11:\n            return f = m.sent(), [3, 13];\n\n          case 12:\n            f = e, m.label = 13;\n\n          case 13:\n            d.spectrogram = (p.data = f, p.frameSize = this.nonBatchInputShape[1], p), m.label = 14;\n\n          case 14:\n            return dispose(i), [2, o];\n        }\n      });\n    });\n  }, e.prototype.recognizeOnline = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var e = this;\n      return __generator(this, function (t) {\n        return [2, new Promise(function (t, r) {\n          e.audioDataExtractor = new BrowserFftFeatureExtractor({\n            sampleRateHz: e.parameters.sampleRateHz,\n            numFramesPerSpectrogram: e.nonBatchInputShape[0],\n            columnTruncateLength: e.nonBatchInputShape[1],\n            suppressionTimeMillis: 0,\n            spectrogramCallback: function (r) {\n              return __awaiter(e, void 0, void 0, function () {\n                var e, n, a;\n                return __generator(this, function (i) {\n                  switch (i.label) {\n                    case 0:\n                      return e = normalize(r), [4, this.audioDataExtractor.stop()];\n\n                    case 1:\n                      return i.sent(), n = t, a = {}, [4, e.data()];\n\n                    case 2:\n                      return n.apply(void 0, [(a.data = i.sent(), a.frameSize = this.nonBatchInputShape[1], a)]), e.dispose(), [2, !1];\n                  }\n                });\n              });\n            },\n            overlapFactor: 0\n          }), e.audioDataExtractor.start();\n        })];\n      });\n    });\n  }, e.prototype.createTransfer = function (e) {\n    if (null == this.model) throw new Error(\"Model has not been loaded yet. Load model by calling ensureModelLoaded(), recognizer(), or listen().\");\n    util.assert(null != e && \"string\" == typeof e && e.length > 1, function () {\n      return \"Expected the name for a transfer-learning recognized to be a non-empty string, but got \" + JSON.stringify(e);\n    }), util.assert(null == this.transferRecognizers[e], function () {\n      return \"There is already a transfer-learning model named '\" + e + \"'\";\n    });\n    var t = new TransferBrowserFftSpeechCommandRecognizer(e, this.parameters, this.model);\n    return this.transferRecognizers[e] = t, t;\n  }, e.prototype.freezeModel = function () {\n    var e, t;\n\n    try {\n      for (var r = __values(this.model.layers), n = r.next(); !n.done; n = r.next()) {\n        n.value.trainable = !1;\n      }\n    } catch (t) {\n      e = {\n        error: t\n      };\n    } finally {\n      try {\n        n && !n.done && (t = r.return) && t.call(r);\n      } finally {\n        if (e) throw e.error;\n      }\n    }\n  }, e.prototype.checkInputTensorShape = function (e) {\n    var t = this.model.inputs[0].shape.length;\n    if (e.shape.length !== t) throw new Error(\"Expected input Tensor to have rank \" + t + \", but got rank \" + e.shape.length + \" that differs \");\n    var r = e.shape.slice(1),\n        n = this.model.inputs[0].shape.slice(1);\n    if (!util.arraysEqual(r, n)) throw new Error(\"Expected input to have shape [null,\" + n + \"], but got shape [null,\" + r + \"]\");\n  }, e.VALID_VOCABULARY_NAMES = [\"18w\", \"directional4w\"], e.DEFAULT_VOCABULARY_NAME = \"18w\", e;\n}(),\n    TransferBrowserFftSpeechCommandRecognizer = function (e) {\n  function t(t, r, n) {\n    var a = e.call(this) || this;\n    return a.name = t, a.parameters = r, a.baseModel = n, util.assert(null != t && \"string\" == typeof t && t.length > 0, function () {\n      return \"The name of a transfer model must be a non-empty string, but got \" + JSON.stringify(t);\n    }), a.nonBatchInputShape = a.baseModel.inputs[0].shape.slice(1), a.words = null, a.dataset = new Dataset(), a;\n  }\n\n  return __extends(t, e), t.prototype.collectExample = function (e, t) {\n    return __awaiter(this, void 0, void 0, function () {\n      var r,\n          n,\n          a,\n          i,\n          o = this;\n      return __generator(this, function (s) {\n        if (util.assert(!this.streaming, function () {\n          return \"Cannot start collection of transfer-learning example because a streaming recognition or transfer-learning example collection is ongoing\";\n        }), util.assert(null != e && \"string\" == typeof e && e.length > 0, function () {\n          return \"Must provide a non-empty string when collecting transfer-learning example\";\n        }), null == t && (t = {}), null != t.durationMultiplier && null != t.durationSec) throw new Error(\"durationMultiplier and durationSec are mutually exclusive, but are both specified.\");\n        return null != t.durationSec ? (util.assert(t.durationSec > 0, function () {\n          return \"Expected durationSec to be > 0, but got \" + t.durationSec;\n        }), n = this.parameters.fftSize / this.parameters.sampleRateHz, r = Math.ceil(t.durationSec / n)) : null != t.durationMultiplier ? (util.assert(t.durationMultiplier >= 1, function () {\n          return \"Expected duration multiplier to be >= 1, but got \" + t.durationMultiplier;\n        }), r = Math.round(this.nonBatchInputShape[0] * t.durationMultiplier)) : r = this.nonBatchInputShape[0], null != t.snippetDurationSec && (util.assert(t.snippetDurationSec > 0, function () {\n          return \"snippetDurationSec is expected to be > 0, but got \" + t.snippetDurationSec;\n        }), util.assert(null != t.onSnippet, function () {\n          return \"onSnippet must be provided if snippetDurationSec is provided.\";\n        })), null != t.onSnippet && util.assert(null != t.snippetDurationSec, function () {\n          return \"snippetDurationSec must be provided if onSnippet is provided.\";\n        }), a = this.parameters.fftSize / this.parameters.sampleRateHz, i = a * r, this.streaming = !0, [2, new Promise(function (n) {\n          var a = null == t.snippetDurationSec ? 1 : t.snippetDurationSec / i,\n              s = 1 - a,\n              l = Math.round(1 / a),\n              u = 0,\n              c = -1,\n              h = [];\n          o.audioDataExtractor = new BrowserFftFeatureExtractor({\n            sampleRateHz: o.parameters.sampleRateHz,\n            numFramesPerSpectrogram: r,\n            columnTruncateLength: o.nonBatchInputShape[1],\n            suppressionTimeMillis: 0,\n            spectrogramCallback: function (r, a) {\n              return __awaiter(o, void 0, void 0, function () {\n                var i, o, s, d, p, f, m, g, v, y, w, b, _, S, E, x, A, T, I, D;\n\n                return __generator(this, function (F) {\n                  switch (F.label) {\n                    case 0:\n                      return null != t.onSnippet ? [3, 7] : (i = normalize(r), s = (o = this.dataset).addExample, d = {\n                        label: e\n                      }, p = {}, [4, i.data()]);\n\n                    case 1:\n                      return d.spectrogram = (p.data = F.sent(), p.frameSize = this.nonBatchInputShape[1], p), t.includeRawAudio ? (m = {}, [4, a.data()]) : [3, 3];\n\n                    case 2:\n                      return m.data = F.sent(), m.sampleRateHz = this.audioDataExtractor.sampleRateHz, f = m, [3, 4];\n\n                    case 3:\n                      f = void 0, F.label = 4;\n\n                    case 4:\n                      return s.apply(o, [(d.rawAudio = f, d)]), i.dispose(), [4, this.audioDataExtractor.stop()];\n\n                    case 5:\n                      return F.sent(), this.streaming = !1, this.collateTransferWords(), g = n, v = {}, [4, r.data()];\n\n                    case 6:\n                      return g.apply(void 0, [(v.data = F.sent(), v.frameSize = this.nonBatchInputShape[1], v)]), [3, 13];\n\n                    case 7:\n                      return [4, r.data()];\n\n                    case 8:\n                      for (y = F.sent(), -1 === c && (c = y.length), w = c - 1; 0 !== y[w] && w >= 0;) w--;\n\n                      return b = c - w - 1, c = w + 1, _ = y.slice(y.length - b, y.length), h.push(_), null != t.onSnippet && t.onSnippet({\n                        data: _,\n                        frameSize: this.nonBatchInputShape[1]\n                      }), u++ !== l ? [3, 13] : [4, this.audioDataExtractor.stop()];\n\n                    case 9:\n                      return F.sent(), this.streaming = !1, this.collateTransferWords(), S = normalizeFloat32Array(concatenateFloat32Arrays(h)), E = {\n                        data: S,\n                        frameSize: this.nonBatchInputShape[1]\n                      }, A = (x = this.dataset).addExample, T = {\n                        label: e,\n                        spectrogram: E\n                      }, t.includeRawAudio ? (D = {}, [4, a.data()]) : [3, 11];\n\n                    case 10:\n                      return D.data = F.sent(), D.sampleRateHz = this.audioDataExtractor.sampleRateHz, I = D, [3, 12];\n\n                    case 11:\n                      I = void 0, F.label = 12;\n\n                    case 12:\n                      A.apply(x, [(T.rawAudio = I, T)]), n(E), F.label = 13;\n\n                    case 13:\n                      return [2, !1];\n                  }\n                });\n              });\n            },\n            overlapFactor: s,\n            includeRawAudio: t.includeRawAudio\n          }), o.audioDataExtractor.start(t.audioTrackConstraints);\n        })];\n      });\n    });\n  }, t.prototype.clearExamples = function () {\n    var e = this;\n    util.assert(null != this.words && this.words.length > 0 && !this.dataset.empty(), function () {\n      return \"No transfer learning examples exist for model name \" + e.name;\n    }), this.dataset.clear(), this.words = null;\n  }, t.prototype.countExamples = function () {\n    if (this.dataset.empty()) throw new Error(\"No examples have been collected for transfer-learning model named '\" + this.name + \"' yet.\");\n    return this.dataset.getExampleCounts();\n  }, t.prototype.getExamples = function (e) {\n    return this.dataset.getExamples(e);\n  }, t.prototype.setExampleKeyFrameIndex = function (e, t) {\n    this.dataset.setExampleKeyFrameIndex(e, t);\n  }, t.prototype.removeExample = function (e) {\n    this.dataset.removeExample(e), this.collateTransferWords();\n  }, t.prototype.isDatasetEmpty = function () {\n    return this.dataset.empty();\n  }, t.prototype.loadExamples = function (e, t) {\n    var r, n, a, i;\n    void 0 === t && (t = !1);\n    var o = new Dataset(e);\n    t && this.clearExamples();\n    var s = o.getVocabulary();\n\n    try {\n      for (var l = __values(s), u = l.next(); !u.done; u = l.next()) {\n        var c = u.value,\n            h = o.getExamples(c);\n\n        try {\n          for (var d = (a = void 0, __values(h)), p = d.next(); !p.done; p = d.next()) {\n            var f = p.value;\n            this.dataset.addExample(f.example);\n          }\n        } catch (e) {\n          a = {\n            error: e\n          };\n        } finally {\n          try {\n            p && !p.done && (i = d.return) && i.call(d);\n          } finally {\n            if (a) throw a.error;\n          }\n        }\n      }\n    } catch (e) {\n      r = {\n        error: e\n      };\n    } finally {\n      try {\n        u && !u.done && (n = l.return) && n.call(l);\n      } finally {\n        if (r) throw r.error;\n      }\n    }\n\n    this.collateTransferWords();\n  }, t.prototype.serializeExamples = function (e) {\n    return this.dataset.serialize(e);\n  }, t.prototype.collateTransferWords = function () {\n    this.words = this.dataset.getVocabulary();\n  }, t.prototype.collectTransferDataAsTensors = function (e, t) {\n    var r = this.nonBatchInputShape[0];\n    e = e || DEFAULT_WINDOW_HOP_RATIO;\n    var n = Math.round(e * r),\n        a = this.dataset.getData(null, __assign({\n      numFrames: r,\n      hopFrames: n\n    }, t));\n    return {\n      xs: a.xs,\n      ys: a.ys\n    };\n  }, t.prototype.collectTransferDataAsTfDataset = function (e, t, r, n) {\n    void 0 === t && (t = .15), void 0 === r && (r = 32);\n    var a = this.nonBatchInputShape[0];\n    e = e || DEFAULT_WINDOW_HOP_RATIO;\n    var i = Math.round(e * a);\n    return this.dataset.getData(null, __assign({\n      numFrames: a,\n      hopFrames: i,\n      getDataset: !0,\n      datasetBatchSize: r,\n      datasetValidationSplit: t\n    }, n));\n  }, t.prototype.train = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t,\n          r = this;\n      return __generator(this, function (n) {\n        return util.assert(null != this.words && this.words.length > 0, function () {\n          return \"Cannot train transfer-learning model '\" + r.name + \"' because no transfer learning example has been collected.\";\n        }), util.assert(this.words.length > 1, function () {\n          return \"Cannot train transfer-learning model '\" + r.name + \"' because only 1 word label ('\" + JSON.stringify(r.words) + \"') has been collected for transfer learning. Requires at least 2.\";\n        }), null != e.fineTuningEpochs && util.assert(e.fineTuningEpochs >= 0 && Number.isInteger(e.fineTuningEpochs), function () {\n          return \"If specified, fineTuningEpochs must be a non-negative integer, but received \" + e.fineTuningEpochs;\n        }), null == e && (e = {}), null == this.model && this.createTransferModelFromBaseModel(), this.secondLastBaseDenseLayer.trainable = !1, this.model.compile({\n          loss: \"categoricalCrossentropy\",\n          optimizer: e.optimizer || \"sgd\",\n          metrics: [\"acc\"]\n        }), t = null == e.fitDatasetDurationMillisThreshold ? 6e4 : e.fitDatasetDurationMillisThreshold, this.dataset.durationMillis() > t ? (console.log(\"Detected large dataset: total duration = \" + this.dataset.durationMillis() + \" ms > \" + t + \" ms. Training transfer model using fitDataset() instead of fit()\"), [2, this.trainOnDataset(e)]) : [2, this.trainOnTensors(e)];\n      });\n    });\n  }, t.prototype.trainOnDataset = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, r, n, a, i, o, s, l, u;\n      return __generator(this, function (c) {\n        switch (c.label) {\n          case 0:\n            return util.assert(e.epochs > 0, function () {\n              return \"Invalid config.epochs\";\n            }), t = null == e.batchSize ? 32 : e.batchSize, r = e.windowHopRatio || DEFAULT_WINDOW_HOP_RATIO, n = __read(this.collectTransferDataAsTfDataset(r, e.validationSplit, t, {\n              augmentByMixingNoiseRatio: e.augmentByMixingNoiseRatio\n            }), 2), a = n[0], i = n[1], o = util.now(), [4, this.model.fitDataset(a, {\n              epochs: e.epochs,\n              validationData: e.validationSplit > 0 ? i : null,\n              callbacks: null == e.callback ? null : [e.callback]\n            })];\n\n          case 1:\n            return s = c.sent(), console.log(\"fitDataset() took \" + (util.now() - o).toFixed(2) + \" ms\"), null != e.fineTuningEpochs && e.fineTuningEpochs > 0 ? (l = util.now(), [4, this.fineTuningUsingTfDatasets(e, a, i)]) : [3, 3];\n\n          case 2:\n            return u = c.sent(), console.log(\"fitDataset() (fine-tuning) took \" + (util.now() - l).toFixed(2) + \" ms\"), [2, [s, u]];\n\n          case 3:\n            return [2, s];\n        }\n      });\n    });\n  }, t.prototype.trainOnTensors = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, r, n, a, i, o, s, l, u, c;\n      return __generator(this, function (h) {\n        switch (h.label) {\n          case 0:\n            t = e.windowHopRatio || DEFAULT_WINDOW_HOP_RATIO, r = this.collectTransferDataAsTensors(t, {\n              augmentByMixingNoiseRatio: e.augmentByMixingNoiseRatio\n            }), n = r.xs, a = r.ys, console.log(\"Training data: xs.shape = \" + n.shape + \", ys.shape = \" + a.shape), h.label = 1;\n\n          case 1:\n            return h.trys.push([1,, 6, 7]), null != e.validationSplit ? (l = balancedTrainValSplit(n, a, e.validationSplit), i = l.trainXs, o = l.trainYs, s = [l.valXs, l.valYs]) : (i = n, o = a), [4, this.model.fit(i, o, {\n              epochs: null == e.epochs ? 20 : e.epochs,\n              validationData: s,\n              batchSize: e.batchSize,\n              callbacks: null == e.callback ? null : [e.callback]\n            })];\n\n          case 2:\n            return u = h.sent(), null != e.fineTuningEpochs && e.fineTuningEpochs > 0 ? [4, this.fineTuningUsingTensors(e, i, o, s)] : [3, 4];\n\n          case 3:\n            return c = h.sent(), [2, [u, c]];\n\n          case 4:\n            return [2, u];\n\n          case 5:\n            return [3, 7];\n\n          case 6:\n            return dispose([n, a, i, o, s]), [7];\n\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, t.prototype.fineTuningUsingTfDatasets = function (e, t, r) {\n    return __awaiter(this, void 0, void 0, function () {\n      var n, a, i;\n      return __generator(this, function (o) {\n        switch (o.label) {\n          case 0:\n            return n = this.secondLastBaseDenseLayer.trainable, this.secondLastBaseDenseLayer.trainable = !0, a = null == e.fineTuningOptimizer ? \"sgd\" : e.fineTuningOptimizer, this.model.compile({\n              loss: \"categoricalCrossentropy\",\n              optimizer: a,\n              metrics: [\"acc\"]\n            }), [4, this.model.fitDataset(t, {\n              epochs: e.fineTuningEpochs,\n              validationData: r,\n              callbacks: null == e.callback ? null : [e.callback]\n            })];\n\n          case 1:\n            return i = o.sent(), this.secondLastBaseDenseLayer.trainable = n, [2, i];\n        }\n      });\n    });\n  }, t.prototype.fineTuningUsingTensors = function (e, t, r, n) {\n    return __awaiter(this, void 0, void 0, function () {\n      var a, i, o;\n      return __generator(this, function (s) {\n        switch (s.label) {\n          case 0:\n            return a = this.secondLastBaseDenseLayer.trainable, this.secondLastBaseDenseLayer.trainable = !0, i = null == e.fineTuningOptimizer ? \"sgd\" : e.fineTuningOptimizer, this.model.compile({\n              loss: \"categoricalCrossentropy\",\n              optimizer: i,\n              metrics: [\"acc\"]\n            }), [4, this.model.fit(t, r, {\n              epochs: e.fineTuningEpochs,\n              validationData: n,\n              batchSize: e.batchSize,\n              callbacks: null == e.fineTuningCallback ? null : [e.fineTuningCallback]\n            })];\n\n          case 1:\n            return o = s.sent(), this.secondLastBaseDenseLayer.trainable = a, [2, o];\n        }\n      });\n    });\n  }, t.prototype.evaluate = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t,\n          r = this;\n      return __generator(this, function (n) {\n        return util.assert(null != e.wordProbThresholds && e.wordProbThresholds.length > 0, function () {\n          return \"Received null or empty wordProbThresholds\";\n        }), t = 0, util.assert(this.words[t] === BACKGROUND_NOISE_TAG, function () {\n          return \"Cannot perform evaluation when the first tag is not \" + BACKGROUND_NOISE_TAG;\n        }), [2, tidy(function () {\n          for (var n = [], a = 0, i = r.collectTransferDataAsTensors(e.windowHopRatio), o = i.xs, s = i.ys.argMax(-1).dataSync(), l = r.model.predict(o), u = max(slice(l, [0, 1], [l.shape[0], l.shape[1] - 1]), -1), c = l.shape[0], h = 0; h < e.wordProbThresholds.length; ++h) {\n            for (var d = e.wordProbThresholds[h], p = u.greater(scalar(d)).dataSync(), f = 0, m = 0, g = 0, v = 0, y = 0; y < c; ++y) s[y] === t ? (f++, p[y] && g++) : (m++, p[y] && v++);\n\n            var w = g / f,\n                b = v / m;\n            n.push({\n              probThreshold: d,\n              fpr: w,\n              tpr: b\n            }), console.log(\"ROC thresh=\" + d + \": fpr=\" + w.toFixed(4) + \", tpr=\" + b.toFixed(4)), h > 0 && (a += Math.abs(n[h - 1].fpr - n[h].fpr) * (n[h - 1].tpr + n[h].tpr) / 2);\n          }\n\n          return {\n            rocCurve: n,\n            auc: a\n          };\n        })];\n      });\n    });\n  }, t.prototype.createTransferModelFromBaseModel = function () {\n    var e = this;\n    util.assert(null != this.words, function () {\n      return \"No word example is available for tranfer-learning model of name \" + e.name;\n    });\n\n    for (var t = this.baseModel.layers, r = t.length - 2; r >= 0 && \"dense\" !== t[r].getClassName().toLowerCase();) r--;\n\n    if (r < 0) throw new Error(\"Cannot find a hidden dense layer in the base model.\");\n    this.secondLastBaseDenseLayer = t[r];\n    var n = this.secondLastBaseDenseLayer.output;\n    this.transferHead = sequential(), this.transferHead.add(layers.dense({\n      units: this.words.length,\n      activation: \"softmax\",\n      inputShape: n.shape.slice(1),\n      name: \"NewHeadDense\"\n    }));\n    var a = this.transferHead.apply(n);\n    this.model = model({\n      inputs: this.baseModel.inputs,\n      outputs: a\n    });\n  }, t.prototype.modelInputShape = function () {\n    return this.baseModel.inputs[0].shape;\n  }, t.prototype.getMetadata = function () {\n    return {\n      tfjsSpeechCommandsVersion: version,\n      modelName: this.name,\n      timeStamp: new Date().toISOString(),\n      wordLabels: this.wordLabels()\n    };\n  }, t.prototype.save = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, r, n;\n      return __generator(this, function (a) {\n        return t = null != e, e = e || getCanonicalSavePath(this.name), t || (r = localStorageWrapper.localStorage.getItem(SAVED_MODEL_METADATA_KEY), (n = null == r ? {} : JSON.parse(r))[this.name] = this.getMetadata(), localStorageWrapper.localStorage.setItem(SAVED_MODEL_METADATA_KEY, JSON.stringify(n))), console.log(\"Saving model to \" + e), [2, this.model.save(e)];\n      });\n    });\n  }, t.prototype.load = function (e) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, r, n;\n      return __generator(this, function (a) {\n        switch (a.label) {\n          case 0:\n            if (t = null != e, e = e || getCanonicalSavePath(this.name), !t) {\n              if (null == (r = JSON.parse(localStorageWrapper.localStorage.getItem(SAVED_MODEL_METADATA_KEY))) || null == r[this.name]) throw new Error(\"Cannot find metadata for transfer model named \" + this.name + '\"');\n              this.words = r[this.name].wordLabels, console.log(\"Loaded word list for model named \" + this.name + \": \" + this.words);\n            }\n\n            return n = this, [4, loadLayersModel(e)];\n\n          case 1:\n            return n.model = a.sent(), console.log(\"Loaded model from \" + e + \":\"), this.model.summary(), [2];\n        }\n      });\n    });\n  }, t.prototype.createTransfer = function (e) {\n    throw new Error(\"Creating transfer-learned recognizer from a transfer-learned recognizer is not supported.\");\n  }, t;\n}(BrowserFftSpeechCommandRecognizer);\n\nfunction getCanonicalSavePath(e) {\n  return \"\" + SAVE_PATH_PREFIX + e;\n}\n\nfunction listSavedTransferModels() {\n  return __awaiter(this, void 0, void 0, function () {\n    var e, t, r;\n    return __generator(this, function (n) {\n      switch (n.label) {\n        case 0:\n          return [4, io.listModels()];\n\n        case 1:\n          for (r in e = n.sent(), t = [], e) r.startsWith(SAVE_PATH_PREFIX) && t.push(r.slice(SAVE_PATH_PREFIX.length));\n\n          return [2, t];\n      }\n    });\n  });\n}\n\nfunction deleteSavedTransferModel(e) {\n  return __awaiter(this, void 0, void 0, function () {\n    var t;\n    return __generator(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return null == (t = JSON.parse(localStorageWrapper.localStorage.getItem(SAVED_MODEL_METADATA_KEY))) && (t = {}), null != t[e] && delete t[e], localStorageWrapper.localStorage.setItem(SAVED_MODEL_METADATA_KEY, JSON.stringify(t)), [4, io.removeModel(getCanonicalSavePath(e))];\n\n        case 1:\n          return r.sent(), [2];\n      }\n    });\n  });\n}\n\nfunction create(e, t, r, n) {\n  if (util.assert(null == r && null == n || null != r && null != n, function () {\n    return \"customModelURL and customMetadataURL must be both provided or both not provided.\";\n  }), null != r && util.assert(null == t, function () {\n    return \"vocabulary name must be null or undefined when modelURL is provided.\";\n  }), \"BROWSER_FFT\" === e) return new BrowserFftSpeechCommandRecognizer(t, r, n);\n  throw \"SOFT_FFT\" === e ? new Error(\"SOFT_FFT SpeechCommandRecognizer has not been implemented yet.\") : new Error(\"Invalid fftType: '\" + e + \"'\");\n}\n\nvar utils = {\n  concatenateFloat32Arrays: concatenateFloat32Arrays,\n  normalizeFloat32Array: normalizeFloat32Array,\n  normalize: normalize,\n  playRawAudio: playRawAudio\n};\nexport { create, utils, BACKGROUND_NOISE_TAG, Dataset, getMaxIntensityFrameIndex, spectrogram2IntensityCurve, deleteSavedTransferModel, listSavedTransferModels, UNKNOWN_TAG, version };","map":{"version":3,"sources":["/Users/wasif/Documents/GitHub/portfolio/node_modules/@tensorflow-models/speech-commands/dist/speech-commands.esm.js"],"names":["util","dispose","io","tidy","zeros","Tensor","tensor4d","unstack","max","slice","scalar","backend","moments","div","sub","add","sqrt","tensor1d","tensor3d","squeeze","oneHot","cast","stack","mul","tensor2d","mean","argMax","tensor","gather","promisify","array","zip","loadLayersModel","model","sequential","layers","extendStatics","e","t","Object","setPrototypeOf","__proto__","Array","r","hasOwnProperty","__extends","constructor","prototype","create","__assign","assign","n","arguments","length","a","call","apply","__awaiter","Promise","i","o","l","next","s","throw","done","value","then","__generator","label","sent","trys","ops","return","Symbol","iterator","TypeError","pop","push","__values","__read","error","__spread","concat","loadMetadataJson","indexOf","fetch","json","require","readFile","JSON","parse","encoding","Error","EPSILON","normalize","epsilon","variance","normalizeFloat32Array","arraySync","Math","from","map","Float32Array","getAudioContextConstructor","window","AudioContext","webkitAudioContext","getAudioMediaStream","navigator","mediaDevices","getUserMedia","audio","video","playRawAudio","createBuffer","data","sampleRateHz","getChannelData","set","createBufferSource","buffer","connect","destination","start","onended","BrowserFftFeatureExtractor","spectrogramCallback","numFramesPerSpectrogram","suppressionTimeMillis","numFrames","fftSize","frameDurationMillis","columnTruncateLength","overlapFactor","includeRawAudio","assert","audioContextConstructor","frameIntervalTask","stream","audioContext","sampleRate","createMediaStreamSource","analyser","createAnalyser","smoothingTimeConstant","freqDataQueue","freqData","timeDataQueue","timeData","round","tracker","Tracker","setInterval","onAudioFrame","bind","getFloatFrequencyData","getFloatTimeDomainData","shift","tick","flattenQueue","getInputTensorFromFrequencyData","suppress","stop","clearInterval","disconnect","close","getTracks","setConfig","getFeatures","forEach","sizeFromShape","period","suppressionTime","counter","suppressionOnset","concatenateArrayBuffers","byteLength","Uint8Array","concatenateFloat32Arrays","string2ArrayBuffer","unescape","encodeURIComponent","charCodeAt","arrayBuffer2String","decodeURIComponent","escape","String","fromCharCode","getUID","floor","random","toString","substring","getRandomInteger","balancedTrainValSplit","dataSync","u","shuffle","c","h","d","trainXs","trainYs","valXs","valYs","balancedTrainValSplitNumArrays","isArray","p","f","m","g","v","y","w","b","_","S","E","x","A","T","I","D","F","O","M","z","R","L","DATASET_SERIALIZATION_DESCRIPTOR","DATASET_SERIALIZATION_VERSION","BACKGROUND_NOISE_TAG","Dataset","examples","label2Ids","arrayBuffer2SerializedExamples","manifest","spectrogramNumFrames","spectrogramFrameSize","rawAudioNumSamples","addExample","deserializeExample","spec","stringify","merge","getVocabulary","getExamples","example","getExampleCounts","uid","getData","size","getSortedUniqueNumFrames","hopFrames","Number","isInteger","spectrogram","frameSize","keyFrameIndex","getMaxIntensityFrameIndex","getValidWindows","getDataset","augmentByMixingNoiseRatio","augmentByMixingNoise","datasetBatchSize","datasetValidationSplit","xs","ys","batch","prefetch","N","C","console","log","Set","sort","removeExample","splice","setExampleKeyFrameIndex","keys","durationMillis","empty","clear","serialize","serializeExample","serializedExamples2ArrayBuffer","rawAudio","spectrogramKeyFrameIndex","rawAudioSampleRateHz","Uint32Array","spectrogram2IntensityCurve","version","UNKNOWN_TAG","SAVED_MODEL_METADATA_KEY","SAVE_PATH_PREFIX","localStorageWrapper","localStorage","getMajorAndMinorVersion","split","join","DEFAULT_WINDOW_HOP_RATIO","BrowserFftSpeechCommandRecognizer","MODEL_URL_PREFIX","SAMPLE_RATE_HZ","FFT_SIZE","DEFAULT_SUPPRESSION_TIME_MILLIS","streaming","transferRecognizers","DEFAULT_VOCABULARY_NAME","VALID_VOCABULARY_NAMES","vocabulary","modelArtifactsOrURL","metadataOrURL","parameters","listen","ensureModelLoaded","probabilityThreshold","includeEmbedding","invokeCallbackOnNoiseAndUnknown","ensureModelWithEmbeddingOutputCreated","modelWithEmbeddingOutput","predict","includeSpectrogram","nonBatchInputShape","words","scores","embedding","audioDataExtractor","audioTrackConstraints","ensureMetadataLoaded","fromMemory","modelTopology","weightSpecs","weightData","inputs","shape","outputShape","freezeModel","elementsPerExample","warmUpModel","spectrogramDurationMillis","getClassName","outputs","output","wordLabels","stopListening","isListening","params","modelInputShape","recognize","recognizeOnline","checkInputTensorShape","all","createTransfer","TransferBrowserFftSpeechCommandRecognizer","trainable","arraysEqual","name","baseModel","dataset","collectExample","durationMultiplier","durationSec","ceil","snippetDurationSec","onSnippet","collateTransferWords","clearExamples","countExamples","isDatasetEmpty","loadExamples","serializeExamples","collectTransferDataAsTensors","collectTransferDataAsTfDataset","train","fineTuningEpochs","createTransferModelFromBaseModel","secondLastBaseDenseLayer","compile","loss","optimizer","metrics","fitDatasetDurationMillisThreshold","trainOnDataset","trainOnTensors","epochs","batchSize","windowHopRatio","validationSplit","now","fitDataset","validationData","callbacks","callback","toFixed","fineTuningUsingTfDatasets","fit","fineTuningUsingTensors","fineTuningOptimizer","fineTuningCallback","evaluate","wordProbThresholds","greater","probThreshold","fpr","tpr","abs","rocCurve","auc","toLowerCase","transferHead","dense","units","activation","inputShape","getMetadata","tfjsSpeechCommandsVersion","modelName","timeStamp","Date","toISOString","save","getCanonicalSavePath","getItem","setItem","load","summary","listSavedTransferModels","listModels","startsWith","deleteSavedTransferModel","removeModel","utils"],"mappings":"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","sourcesContent":["/**\n    * @license\n    * Copyright 2021 Google LLC. All Rights Reserved.\n    * Licensed under the Apache License, Version 2.0 (the \"License\");\n    * you may not use this file except in compliance with the License.\n    * You may obtain a copy of the License at\n    *\n    * http://www.apache.org/licenses/LICENSE-2.0\n    *\n    * Unless required by applicable law or agreed to in writing, software\n    * distributed under the License is distributed on an \"AS IS\" BASIS,\n    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    * See the License for the specific language governing permissions and\n    * limitations under the License.\n    * =============================================================================\n    */\nimport{util,dispose,io,tidy,zeros,Tensor,tensor4d,unstack,max,slice,scalar,backend,moments,div,sub,add,sqrt,tensor1d,tensor3d,squeeze,oneHot,cast,stack,mul,tensor2d,mean,argMax,tensor,gather}from\"@tensorflow/tfjs-core\";import{promisify}from\"util\";import{array,zip}from\"@tensorflow/tfjs-data\";import{loadLayersModel,model,sequential,layers}from\"@tensorflow/tfjs-layers\";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function __values(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function __read(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function loadMetadataJson(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,a,i,o,s;return __generator(this,function(l){switch(l.label){case 0:return t=\"http://\",r=\"https://\",n=\"file://\",0!==e.indexOf(t)&&0!==e.indexOf(r)?[3,3]:[4,fetch(e)];case 1:return[4,l.sent().json()];case 2:return[2,l.sent()];case 3:return 0!==e.indexOf(n)?[3,5]:(a=require(\"fs\"),i=promisify(a.readFile),s=(o=JSON).parse,[4,i(e.slice(n.length),{encoding:\"utf-8\"})]);case 4:return[2,s.apply(o,[l.sent()])];case 5:throw new Error(\"Unsupported URL scheme in metadata URL: \"+e+\". Supported schemes are: http://, https://, and (node.js-only) file://\")}})})}var EPSILON=null;function normalize(e){return null==EPSILON&&(EPSILON=backend().epsilon()),tidy(function(){var t=moments(e),r=t.mean,n=t.variance;return div(sub(e,r),add(sqrt(n),EPSILON))})}function normalizeFloat32Array(e){if(e.length<2)throw new Error(\"Cannot normalize a Float32Array with fewer than 2 elements.\");return null==EPSILON&&(EPSILON=backend().epsilon()),tidy(function(){var t=moments(tensor1d(e)),r=t.mean,n=t.variance,a=r.arraySync(),i=Math.sqrt(n.arraySync()),o=Array.from(e).map(function(e){return(e-a)/(i+EPSILON)});return new Float32Array(o)})}function getAudioContextConstructor(){return window.AudioContext||window.webkitAudioContext}function getAudioMediaStream(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,navigator.mediaDevices.getUserMedia({audio:null==e||e,video:!1})]})})}function playRawAudio(e,t){var r=new(window.AudioContext||window.webkitAudioContext),n=r.createBuffer(1,e.data.length,e.sampleRateHz);n.getChannelData(0).set(e.data);var a=r.createBufferSource();a.buffer=n,a.connect(r.destination),a.start(),a.onended=function(){null!=t&&t()}}var BrowserFftFeatureExtractor=function(){function e(e){var t=this;if(null==e)throw new Error(\"Required configuration object is missing for BrowserFftFeatureExtractor constructor\");if(null==e.spectrogramCallback)throw new Error(\"spectrogramCallback cannot be null or undefined\");if(!(e.numFramesPerSpectrogram>0))throw new Error(\"Invalid value in numFramesPerSpectrogram: \"+e.numFramesPerSpectrogram);if(e.suppressionTimeMillis<0)throw new Error(\"Expected suppressionTimeMillis to be >= 0, but got \"+e.suppressionTimeMillis);if(this.suppressionTimeMillis=e.suppressionTimeMillis,this.spectrogramCallback=e.spectrogramCallback,this.numFrames=e.numFramesPerSpectrogram,this.sampleRateHz=e.sampleRateHz||44100,this.fftSize=e.fftSize||1024,this.frameDurationMillis=this.fftSize/this.sampleRateHz*1e3,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.overlapFactor=e.overlapFactor,this.includeRawAudio=e.includeRawAudio,util.assert(this.overlapFactor>=0&&this.overlapFactor<1,function(){return\"Expected overlapFactor to be >= 0 and < 1, but got \"+t.overlapFactor}),this.columnTruncateLength>this.fftSize)throw new Error(\"columnTruncateLength \"+this.columnTruncateLength+\" exceeds fftSize (\"+this.fftSize+\").\");this.audioContextConstructor=getAudioContextConstructor()}return e.prototype.start=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n;return __generator(this,function(a){switch(a.label){case 0:if(null!=this.frameIntervalTask)throw new Error(\"Cannot start already-started BrowserFftFeatureExtractor\");return t=this,[4,getAudioMediaStream(e)];case 1:return t.stream=a.sent(),this.audioContext=new this.audioContextConstructor({sampleRate:this.sampleRateHz}),r=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=0,r.connect(this.analyser),this.freqDataQueue=[],this.freqData=new Float32Array(this.fftSize),this.includeRawAudio&&(this.timeDataQueue=[],this.timeData=new Float32Array(this.fftSize)),n=Math.max(1,Math.round(this.numFrames*(1-this.overlapFactor))),this.tracker=new Tracker(n,Math.round(this.suppressionTimeMillis/this.frameDurationMillis)),this.frameIntervalTask=setInterval(this.onAudioFrame.bind(this),this.fftSize/this.sampleRateHz*1e3),[2]}})})},e.prototype.onAudioFrame=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(a){switch(a.label){case 0:return this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0?[2]:(this.freqDataQueue.push(this.freqData.slice(0,this.columnTruncateLength)),this.includeRawAudio&&(this.analyser.getFloatTimeDomainData(this.timeData),this.timeDataQueue.push(this.timeData.slice())),this.freqDataQueue.length>this.numFrames&&this.freqDataQueue.shift(),this.tracker.tick()?(e=flattenQueue(this.freqDataQueue),t=getInputTensorFromFrequencyData(e,[1,this.numFrames,this.columnTruncateLength,1]),r=void 0,this.includeRawAudio&&(n=flattenQueue(this.timeDataQueue),r=getInputTensorFromFrequencyData(n,[1,this.numFrames*this.fftSize])),[4,this.spectrogramCallback(t,r)]):[3,2]);case 1:a.sent()&&this.tracker.suppress(),dispose([t,r]),a.label=2;case 2:return[2]}})})},e.prototype.stop=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){if(null==this.frameIntervalTask)throw new Error(\"Cannot stop because there is no ongoing streaming activity.\");return clearInterval(this.frameIntervalTask),this.frameIntervalTask=null,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop(),[2]})})},e.prototype.setConfig=function(e){throw new Error(\"setConfig() is not implemented for BrowserFftFeatureExtractor.\")},e.prototype.getFeatures=function(){throw new Error(\"getFeatures() is not implemented for BrowserFftFeatureExtractor. Use the spectrogramCallback field of the constructor config instead.\")},e}();function flattenQueue(e){var t=e[0].length,r=new Float32Array(e.length*t);return e.forEach(function(e,n){return r.set(e,n*t)}),r}function getInputTensorFromFrequencyData(e,t){var r=new Float32Array(util.sizeFromShape(t));return r.set(e,r.length-e.length),tensor(r,t)}var Tracker=function(){function e(e,t){var r=this;this.period=e,this.suppressionTime=null==t?0:t,this.counter=0,util.assert(this.period>0,function(){return\"Expected period to be positive, but got \"+r.period})}return e.prototype.tick=function(){return this.counter++,this.counter%this.period==0&&(null==this.suppressionOnset||this.counter-this.suppressionOnset>this.suppressionTime)},e.prototype.suppress=function(){this.suppressionOnset=this.counter},e}();function concatenateArrayBuffers(e){var t=0;e.forEach(function(e){t+=e.byteLength});var r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(new Uint8Array(e),n),n+=e.byteLength}),r.buffer}function concatenateFloat32Arrays(e){var t=0;e.forEach(function(e){return t+=e.length});var r=new Float32Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r}function string2ArrayBuffer(e){if(null==e)throw new Error(\"Received null or undefind string\");for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r.buffer}function arrayBuffer2String(e){if(null==e)throw new Error(\"Received null or undefind buffer\");var t=new Uint8Array(e);return decodeURIComponent(escape(String.fromCharCode.apply(String,__spread(t))))}function getUID(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+\"-\"+e()+\"-\"+e()+\"-\"+e()+\"-\"+e()+e()+e()}function getRandomInteger(e,t){return Math.floor((t-e)*Math.random())+e}function balancedTrainValSplit(e,t,r){return util.assert(r>0&&r<1,function(){return\"validationSplit is expected to be >0 and <1, but got \"+r}),tidy(function(){for(var n=argMax(t,-1).dataSync(),a=[],i=0;i<n.length;++i){var o=n[i];null==a[o]&&(a[o]=[]),a[o].push(i)}var s=a.length,l=[],u=[];a.map(function(e){return util.shuffle(e)});for(i=0;i<s;++i)for(var c=a[i],h=Math.round(c.length*(1-r)),d=0;d<c.length;++d)d<h?l.push(c[d]):u.push(c[d]);return{trainXs:gather(e,l),trainYs:gather(t,l),valXs:gather(e,u),valYs:gather(t,u)}})}function balancedTrainValSplitNumArrays(e,t,r){var n,a,i,o,s,l,u,c;util.assert(r>0&&r<1,function(){return\"validationSplit is expected to be >0 and <1, but got \"+r});for(var h=!Array.isArray(e[0]),d=t,p=[],f=0;f<d.length;++f){var m=d[f];null==p[m]&&(p[m]=[]),p[m].push(f)}var g=p.length,v=[],y=[];p.map(function(e){return util.shuffle(e)});for(f=0;f<g;++f)for(var w=p[f],b=Math.round(w.length*(1-r)),_=0;_<w.length;++_)_<b?v.push(w[_]):y.push(w[_]);if(h){var S=[],E=[],x=[],A=[];try{for(var T=__values(v),I=T.next();!I.done;I=T.next()){var D=I.value;S.push(e[D]),E.push(t[D])}}catch(e){n={error:e}}finally{try{I&&!I.done&&(a=T.return)&&a.call(T)}finally{if(n)throw n.error}}try{for(var F=__values(y),O=F.next();!O.done;O=F.next()){D=O.value;x.push(e[D]),A.push(t[D])}}catch(e){i={error:e}}finally{try{O&&!O.done&&(o=F.return)&&o.call(F)}finally{if(i)throw i.error}}return{trainXs:S,trainYs:E,valXs:x,valYs:A}}S=[],E=[],x=[],A=[];try{for(var M=__values(v),z=M.next();!z.done;z=M.next()){D=z.value;S.push(e[D]),E.push(t[D])}}catch(e){s={error:e}}finally{try{z&&!z.done&&(l=M.return)&&l.call(M)}finally{if(s)throw s.error}}try{for(var R=__values(y),L=R.next();!L.done;L=R.next()){D=L.value;x.push(e[D]),A.push(t[D])}}catch(e){u={error:e}}finally{try{L&&!L.done&&(c=R.return)&&c.call(R)}finally{if(u)throw u.error}}return{trainXs:S,trainYs:E,valXs:x,valYs:A}}var DATASET_SERIALIZATION_DESCRIPTOR=\"TFJSSCDS\",DATASET_SERIALIZATION_VERSION=1,BACKGROUND_NOISE_TAG=\"_background_noise_\",Dataset=function(){function e(e){if(this.examples={},this.label2Ids={},null!=e)for(var t=arrayBuffer2SerializedExamples(e),r=0,n=0;n<t.manifest.length;++n){var a=t.manifest[n],i=a.spectrogramNumFrames*a.spectrogramFrameSize;null!=a.rawAudioNumSamples&&(i+=a.rawAudioNumSamples),i*=4,this.addExample(deserializeExample({spec:a,data:t.data.slice(r,r+i)})),r+=i}}return e.prototype.addExample=function(e){util.assert(null!=e,function(){return\"Got null or undefined example\"}),util.assert(null!=e.label&&e.label.length>0,function(){return\"Expected label to be a non-empty string, but got \"+JSON.stringify(e.label)});var t=getUID();return this.examples[t]=e,e.label in this.label2Ids||(this.label2Ids[e.label]=[]),this.label2Ids[e.label].push(t),t},e.prototype.merge=function(e){var t,r,n,a;util.assert(e!==this,function(){return\"Cannot merge a dataset into itself\"});var i=e.getVocabulary();try{for(var o=__values(i),s=o.next();!s.done;s=o.next()){var l=s.value,u=e.getExamples(l);try{for(var c=(n=void 0,__values(u)),h=c.next();!h.done;h=c.next()){var d=h.value;this.addExample(d.example)}}catch(e){n={error:e}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},e.prototype.getExampleCounts=function(){var e={};for(var t in this.examples){var r=this.examples[t];r.label in e||(e[r.label]=0),e[r.label]++}return e},e.prototype.getExamples=function(e){var t=this;util.assert(null!=e,function(){return\"Expected label to be a string, but got \"+JSON.stringify(e)}),util.assert(e in this.label2Ids,function(){return'No example of label \"'+e+'\" exists in dataset'});var r=[];return this.label2Ids[e].forEach(function(e){r.push({uid:e,example:t.examples[e]})}),r},e.prototype.getData=function(e,t){var r=this;util.assert(this.size()>0,function(){return\"Cannot get spectrograms as tensors because the dataset is empty\"});var n=this.getVocabulary();null!=e?util.assert(-1!==n.indexOf(e),function(){return\"Label \"+e+\" is not in the vocabulary (\"+JSON.stringify(n)+\")\"}):util.assert(n.length>1,function(){return\"One-hot encoding of labels requires the vocabulary to have at least two words, but it has only \"+n.length+\" word.\"}),null==t&&(t={});var a,i,o=this.getSortedUniqueNumFrames();1===o.length?(a=null==t.numFrames?o[0]:t.numFrames,i=null==t.hopFrames?1:t.hopFrames):(a=t.numFrames,util.assert(null!=a&&Number.isInteger(a)&&a>0,function(){return\"There are \"+o.length+\" unique lengths among the \"+r.size()+\" examples of this Dataset, hence numFrames is required. But it is not provided.\"}),util.assert(a<=o[0],function(){return\"numFrames (\"+a+\") exceeds the minimum numFrames (\"+o[0]+\") among the examples of the Dataset.\"}),i=t.hopFrames,util.assert(null!=i&&Number.isInteger(i)&&i>0,function(){return\"There are \"+o.length+\" unique lengths among the \"+r.size()+\" examples of this Dataset, hence hopFrames is required. But it is not provided.\"}));var s=null==t.normalize||t.normalize;return tidy(function(){for(var o,l,u,c=[],h=[],d=[],p=0;p<n.length;++p){var f=n[p];if(null==e||f===e){var m=r.label2Ids[f],g=function(n){var o,l,m=r.examples[n].spectrogram,g=m.frameSize;null==u?u=g:util.assert(g===u,function(){return\"Mismatch in frameSize  (\"+g+\" vs \"+u+\")\"});var v=m.data.length/g,y=null;f!==BACKGROUND_NOISE_TAG&&(y=null==m.keyFrameIndex?getMaxIntensityFrameIndex(m).dataSync()[0]:m.keyFrameIndex);var w=tensor3d(m.data,[v,g,1]),b=getValidWindows(v,y,a,i),_=function(r){var n=tidy(function(){var e=slice(w,[r[0],0,0],[r[1]-r[0],-1,-1]);return s?normalize(e):e});t.getDataset?h.push(n.dataSync()):c.push(n),null==e&&d.push(p)};try{for(var S=(o=void 0,__values(b)),E=S.next();!E.done;E=S.next()){_(E.value)}}catch(e){o={error:e}}finally{try{E&&!E.done&&(l=S.return)&&l.call(S)}finally{if(o)throw o.error}}dispose(w)};try{for(var v=(o=void 0,__values(m)),y=v.next();!y.done;y=v.next()){g(y.value)}}catch(e){o={error:e}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}}}null!=t.augmentByMixingNoiseRatio&&r.augmentByMixingNoise(t.getDataset?h:c,d,t.augmentByMixingNoiseRatio);var w=null==t.shuffle||t.shuffle;if(t.getDataset){var b=null==t.datasetBatchSize?32:t.datasetBatchSize,_=null==t.datasetValidationSplit?.15:t.datasetValidationSplit;util.assert(_>0&&_<1,function(){return\"Invalid dataset validation split: \"+_});var S=h.map(function(e,t){return[e,d[t]]});util.shuffle(S),h=S.map(function(e){return e[0]});var E=S.map(function(e){return e[1]}),x=balancedTrainValSplitNumArrays(h,E,_),A=x.trainXs,T=x.trainYs,I=x.valXs,D=x.valYs,F=array(A).map(function(e){return tensor3d(e,[a,u,1])}),O=array(T).map(function(e){return squeeze(oneHot([e],n.length),[0])}),M=zip({xs:F,ys:O});w&&(M=M.shuffle(h.length)),M=M.batch(b).prefetch(4);var z=array(I).map(function(e){return tensor3d(e,[a,u,1])}),R=array(D).map(function(e){return squeeze(oneHot([e],n.length),[0])}),L=zip({xs:z,ys:R});return[M,L=L.batch(b).prefetch(4)]}if(w){var N=[];c.forEach(function(e,t){N.push({x:e,y:d[t]})}),util.shuffle(N),c=N.map(function(e){return e.x}),d=N.map(function(e){return e.y})}var C=null==e?cast(oneHot(tensor1d(d,\"int32\"),n.length),\"float32\"):void 0;return{xs:stack(c),ys:C}})},e.prototype.augmentByMixingNoise=function(e,t,r){var n,a;if(null==e||0===e.length)throw new Error(\"Cannot perform augmentation because data is null or empty\");for(var i=e[0]instanceof Float32Array,o=this.getVocabulary(),s=[],l=[],u=0;u<t.length;++u)o[t[u]]===BACKGROUND_NOISE_TAG?s.push(u):l.push(u);if(0===s.length)throw new Error(\"Cannot perform augmentation by mixing with noise when there is no example with label \"+BACKGROUND_NOISE_TAG);var c=[],h=[],d=function(n){var a=s[getRandomInteger(0,s.length)],o=i?tensor1d(e[n]):e[n],l=i?tensor1d(e[a]):e[a],u=tidy(function(){return normalize(add(o,mul(l,r)))});i?c.push(u.dataSync()):c.push(u),h.push(t[n])};try{for(var p=__values(l),f=p.next();!f.done;f=p.next()){d(f.value)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}console.log(\"Data augmentation: mixing noise: added \"+c.length+\" examples\"),c.forEach(function(t){return e.push(t)}),t.push.apply(t,__spread(h))},e.prototype.getSortedUniqueNumFrames=function(){for(var e,t,r=new Set,n=this.getVocabulary(),a=0;a<n.length;++a){var i=n[a],o=this.label2Ids[i];try{for(var s=(e=void 0,__values(o)),l=s.next();!l.done;l=s.next()){var u=l.value,c=this.examples[u].spectrogram,h=c.data.length/c.frameSize;r.add(h)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}var d=__spread(r);return d.sort(),d},e.prototype.removeExample=function(e){if(!(e in this.examples))throw new Error(\"Nonexistent example UID: \"+e);var t=this.examples[e].label;delete this.examples[e];var r=this.label2Ids[t].indexOf(e);this.label2Ids[t].splice(r,1),0===this.label2Ids[t].length&&delete this.label2Ids[t]},e.prototype.setExampleKeyFrameIndex=function(e,t){if(!(e in this.examples))throw new Error(\"Nonexistent example UID: \"+e);var r=this.examples[e].spectrogram,n=r.data.length/r.frameSize;util.assert(t>=0&&t<n&&Number.isInteger(t),function(){return\"Invalid keyFrameIndex: \"+t+\". Must be >= 0, < \"+n+\", and an integer.\"}),r.keyFrameIndex=t},e.prototype.size=function(){return Object.keys(this.examples).length},e.prototype.durationMillis=function(){var e=0;for(var t in this.examples){var r=this.examples[t].spectrogram,n=23.22|r.frameDurationMillis;e+=r.data.length/r.frameSize*n}return e},e.prototype.empty=function(){return 0===this.size()},e.prototype.clear=function(){this.examples={}},e.prototype.getVocabulary=function(){var e=new Set;for(var t in this.examples){var r=this.examples[t];e.add(r.label)}var n=__spread(e);return n.sort(),n},e.prototype.serialize=function(e){var t,r,n,a,i=this.getVocabulary();util.assert(!this.empty(),function(){return\"Cannot serialize empty Dataset\"}),null!=e&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){if(-1===i.indexOf(e))throw new Error('Word label \"'+e+'\" does not exist in the vocabulary of this dataset. The vocabulary is: '+JSON.stringify(i)+\".\")}));var o=[],s=[];try{for(var l=__values(i),u=l.next();!u.done;u=l.next()){var c=u.value;if(null==e||-1!==e.indexOf(c)){var h=this.label2Ids[c];try{for(var d=(n=void 0,__values(h)),p=d.next();!p.done;p=d.next()){var f=p.value,m=serializeExample(this.examples[f]);o.push(m.spec),s.push(m.data)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return serializedExamples2ArrayBuffer({manifest:o,data:concatenateArrayBuffers(s)})},e}();function serializeExample(e){var t=null!=e.rawAudio,r={label:e.label,spectrogramNumFrames:e.spectrogram.data.length/e.spectrogram.frameSize,spectrogramFrameSize:e.spectrogram.frameSize};null!=e.spectrogram.keyFrameIndex&&(r.spectrogramKeyFrameIndex=e.spectrogram.keyFrameIndex);var n=e.spectrogram.data.buffer.slice(0);return t&&(r.rawAudioNumSamples=e.rawAudio.data.length,r.rawAudioSampleRateHz=e.rawAudio.sampleRateHz,n=concatenateArrayBuffers([n,e.rawAudio.data.buffer])),{spec:r,data:n}}function deserializeExample(e){var t={frameSize:e.spec.spectrogramFrameSize,data:new Float32Array(e.data.slice(0,4*e.spec.spectrogramFrameSize*e.spec.spectrogramNumFrames))};null!=e.spec.spectrogramKeyFrameIndex&&(t.keyFrameIndex=e.spec.spectrogramKeyFrameIndex);var r={label:e.spec.label,spectrogram:t};return null!=e.spec.rawAudioNumSamples&&(r.rawAudio={sampleRateHz:e.spec.rawAudioSampleRateHz,data:new Float32Array(e.data.slice(4*e.spec.spectrogramFrameSize*e.spec.spectrogramNumFrames))}),r}function serializedExamples2ArrayBuffer(e){var t=string2ArrayBuffer(JSON.stringify(e.manifest)),r=string2ArrayBuffer(DATASET_SERIALIZATION_DESCRIPTOR),n=new Uint32Array([DATASET_SERIALIZATION_VERSION]),a=new Uint32Array([t.byteLength]);return concatenateArrayBuffers([concatenateArrayBuffers([r,n.buffer,a.buffer]),t,e.data])}function arrayBuffer2SerializedExamples(e){util.assert(null!=e,function(){return\"Received null or undefined buffer\"});var t=0,r=arrayBuffer2String(e.slice(t,DATASET_SERIALIZATION_DESCRIPTOR.length));util.assert(r===DATASET_SERIALIZATION_DESCRIPTOR,function(){return\"Deserialization error: Invalid descriptor\"}),t+=DATASET_SERIALIZATION_DESCRIPTOR.length,t+=4;var n=new Uint32Array(e,t,1),a=t+=4;t=a+n[0];var i=arrayBuffer2String(e.slice(a,t));return{manifest:JSON.parse(i),data:e.slice(t)}}function getValidWindows(e,t,r,n){if(util.assert(Number.isInteger(e)&&e>0,function(){return\"snippetLength must be a positive integer, but got \"+e}),null!=t&&util.assert(Number.isInteger(t)&&t>=0,function(){return\"focusIndex must be a non-negative integer, but got \"+t}),util.assert(Number.isInteger(r)&&r>0,function(){return\"windowLength must be a positive integer, but got \"+r}),util.assert(Number.isInteger(n)&&n>0,function(){return\"windowHop must be a positive integer, but got \"+n}),util.assert(r<=e,function(){return\"windowLength (\"+r+\") exceeds snippetLength (\"+e+\")\"}),util.assert(t<e,function(){return\"focusIndex (\"+t+\") equals or exceeds snippetLength (\"+e+\")\"}),r===e)return[[0,e]];var a=[];if(null==t){for(var i=0;i+r<=e;)a.push([i,i+r]),i+=n;return a}var o=Math.floor(r/2),s=t-o;for(s<0?s=0:s+r>e&&(s=e-r);!(s-n<0||t>=s-n+r);)s-=n;for(;s+r<=e&&!(t<s);)a.push([s,s+r]),s+=n;return a}function spectrogram2IntensityCurve(e){return tidy(function(){var t=e.data.length/e.frameSize,r=tensor2d(e.data,[t,e.frameSize]);return mean(r,-1)})}function getMaxIntensityFrameIndex(e){return tidy(function(){return argMax(spectrogram2IntensityCurve(e))})}var version=\"0.5.4\",UNKNOWN_TAG=\"_unknown_\",SAVED_MODEL_METADATA_KEY=\"tfjs-speech-commands-saved-model-metadata\",SAVE_PATH_PREFIX=\"indexeddb://tfjs-speech-commands-model/\",localStorageWrapper={localStorage:\"undefined\"==typeof window?null:window.localStorage};function getMajorAndMinorVersion(e){return e.split(\".\").slice(0,2).join(\".\")}var DEFAULT_WINDOW_HOP_RATIO=.25,BrowserFftSpeechCommandRecognizer=function(){function e(t,r,n){this.MODEL_URL_PREFIX=\"https://storage.googleapis.com/tfjs-models/tfjs/speech-commands/v\"+getMajorAndMinorVersion(version)+\"/browser_fft\",this.SAMPLE_RATE_HZ=44100,this.FFT_SIZE=1024,this.DEFAULT_SUPPRESSION_TIME_MILLIS=0,this.streaming=!1,this.transferRecognizers={},util.assert(null==r&&null==n||null!=r&&null!=n,function(){return\"modelURL and metadataURL must be both provided or both not provided.\"}),null==r?(null==t?t=e.DEFAULT_VOCABULARY_NAME:util.assert(-1!==e.VALID_VOCABULARY_NAMES.indexOf(t),function(){return\"Invalid vocabulary name: '\"+t+\"'\"}),this.vocabulary=t,this.modelArtifactsOrURL=this.MODEL_URL_PREFIX+\"/\"+this.vocabulary+\"/model.json\",this.metadataOrURL=this.MODEL_URL_PREFIX+\"/\"+this.vocabulary+\"/metadata.json\"):(util.assert(null==t,function(){return\"vocabulary name must be null or undefined when modelURL is provided\"}),this.modelArtifactsOrURL=r,this.metadataOrURL=n),this.parameters={sampleRateHz:this.SAMPLE_RATE_HZ,fftSize:this.FFT_SIZE}}return e.prototype.listen=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,a,i,o,s=this;return __generator(this,function(l){switch(l.label){case 0:if(this.streaming)throw new Error(\"Cannot start streaming again when streaming is ongoing.\");return[4,this.ensureModelLoaded()];case 1:if(l.sent(),null==t&&(t={}),r=null==t.probabilityThreshold?0:t.probabilityThreshold,t.includeEmbedding&&(r=0),util.assert(r>=0&&r<=1,function(){return\"Invalid probabilityThreshold value: \"+r}),n=null!=t.invokeCallbackOnNoiseAndUnknown&&t.invokeCallbackOnNoiseAndUnknown,t.includeEmbedding&&(n=!0),t.suppressionTimeMillis<0)throw new Error(\"suppressionTimeMillis is expected to be >= 0, but got \"+t.suppressionTimeMillis);return a=null==t.overlapFactor?.5:t.overlapFactor,util.assert(a>=0&&a<1,function(){return\"Expected overlapFactor to be >= 0 and < 1, but got \"+a}),i=function(a,i){return __awaiter(s,void 0,void 0,function(){var i,o,s,l,u,c,h,d,p,f,m;return __generator(this,function(g){switch(g.label){case 0:return i=normalize(a),t.includeEmbedding?[4,this.ensureModelWithEmbeddingOutputCreated()]:[3,2];case 1:return g.sent(),m=__read(this.modelWithEmbeddingOutput.predict(i),2),o=m[0],s=m[1],[3,3];case 2:o=this.model.predict(i),g.label=3;case 3:return[4,o.data()];case 4:return l=g.sent(),[4,(u=o.argMax(-1)).data()];case 5:return c=g.sent()[0],h=Math.max.apply(Math,__spread(l)),dispose([o,u,i]),h<r?[2,!1]:[3,6];case 6:return d=void 0,t.includeSpectrogram?(p={},[4,a.data()]):[3,8];case 7:p.data=g.sent(),p.frameSize=this.nonBatchInputShape[1],d=p,g.label=8;case 8:return f=!0,n||this.words[c]!==BACKGROUND_NOISE_TAG&&this.words[c]!==UNKNOWN_TAG||(f=!1),f&&e({scores:l,spectrogram:d,embedding:s}),[2,f]}})})},o=null==t.suppressionTimeMillis?this.DEFAULT_SUPPRESSION_TIME_MILLIS:t.suppressionTimeMillis,this.audioDataExtractor=new BrowserFftFeatureExtractor({sampleRateHz:this.parameters.sampleRateHz,numFramesPerSpectrogram:this.nonBatchInputShape[0],columnTruncateLength:this.nonBatchInputShape[1],suppressionTimeMillis:o,spectrogramCallback:i,overlapFactor:a}),[4,this.audioDataExtractor.start(t.audioTrackConstraints)];case 2:return l.sent(),this.streaming=!0,[2]}})})},e.prototype.ensureModelLoaded=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,a=this;return __generator(this,function(i){switch(i.label){case 0:return null!=this.model?[2]:[4,this.ensureMetadataLoaded()];case 1:return i.sent(),\"string\"!=typeof this.modelArtifactsOrURL?[3,3]:[4,loadLayersModel(this.modelArtifactsOrURL)];case 2:return e=i.sent(),[3,5];case 3:return[4,loadLayersModel(io.fromMemory(this.modelArtifactsOrURL.modelTopology,this.modelArtifactsOrURL.weightSpecs,this.modelArtifactsOrURL.weightData))];case 4:e=i.sent(),i.label=5;case 5:if(1!==e.inputs.length)throw new Error(\"Expected model to have 1 input, but got a model with \"+e.inputs.length+\" inputs\");if(4!==e.inputs[0].shape.length)throw new Error(\"Expected model to have an input shape of rank 4, but got an input shape of rank \"+e.inputs[0].shape.length);if(1!==e.inputs[0].shape[3])throw new Error(\"Expected model to have an input shape with 1 as the last dimension, but got input shape\"+JSON.stringify(e.inputs[0].shape[3])+\"}\");if(2!==(t=e.outputShape).length)throw new Error(\"Expected loaded model to have an output shape of rank 2,but received shape \"+JSON.stringify(t));if(t[1]!==this.words.length)throw new Error(\"Mismatch between the last dimension of model's output shape (\"+t[1]+\") and number of words (\"+this.words.length+\").\");return this.model=e,this.freezeModel(),this.nonBatchInputShape=e.inputs[0].shape.slice(1),this.elementsPerExample=1,e.inputs[0].shape.slice(1).forEach(function(e){return a.elementsPerExample*=e}),this.warmUpModel(),r=this.parameters.fftSize/this.parameters.sampleRateHz*1e3,n=e.inputs[0].shape[1],this.parameters.spectrogramDurationMillis=n*r,[2]}})})},e.prototype.ensureModelWithEmbeddingOutputCreated=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return null!=this.modelWithEmbeddingOutput?[2]:[4,this.ensureModelLoaded()];case 1:for(r.sent(),t=this.model.layers.length-2;t>=0;--t)if(\"Dense\"===this.model.layers[t].getClassName()){e=this.model.layers[t];break}if(null==e)throw new Error(\"Failed to find second last dense layer in the original model.\");return this.modelWithEmbeddingOutput=model({inputs:this.model.inputs,outputs:[this.model.outputs[0],e.output]}),[2]}})})},e.prototype.warmUpModel=function(){var e=this;tidy(function(){for(var t=zeros([1].concat(e.nonBatchInputShape)),r=0;r<3;++r)e.model.predict(t)})},e.prototype.ensureMetadataLoaded=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(n){switch(n.label){case 0:return null!=this.words?[2]:\"string\"!=typeof this.metadataOrURL?[3,2]:[4,loadMetadataJson(this.metadataOrURL)];case 1:return t=n.sent(),[3,3];case 2:t=this.metadataOrURL,n.label=3;case 3:if(null==(e=t).wordLabels){if(null==(r=e.words))throw new Error('Cannot find field \"words\" or \"wordLabels\" in metadata JSON file');this.words=r}else this.words=e.wordLabels;return[2]}})})},e.prototype.stopListening=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.streaming)throw new Error(\"Cannot stop streaming when streaming is not ongoing.\");return[4,this.audioDataExtractor.stop()];case 1:return e.sent(),this.streaming=!1,[2]}})})},e.prototype.isListening=function(){return this.streaming},e.prototype.wordLabels=function(){return this.words},e.prototype.params=function(){return this.parameters},e.prototype.modelInputShape=function(){if(null==this.model)throw new Error(\"Model has not been loaded yet. Load model by calling ensureModelLoaded(), recognize(), or listen().\");return this.model.inputs[0].shape},e.prototype.recognize=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,a,i,o,s,l,u,c,h,d,p,f;return __generator(this,function(m){switch(m.label){case 0:return null==t&&(t={}),[4,this.ensureModelLoaded()];case 1:return m.sent(),null!=e?[3,3]:[4,this.recognizeOnline()];case 2:r=m.sent(),e=r.data,m.label=3;case 3:if(e instanceof Tensor)this.checkInputTensorShape(e),a=e,n=e.shape[0];else{if(e.length%this.elementsPerExample)throw new Error(\"The length of the input Float32Array \"+e.length+\" is not divisible by the number of tensor elements per per example expected by the model \"+this.elementsPerExample+\".\");n=e.length/this.elementsPerExample,a=tensor4d(e,[n].concat(this.nonBatchInputShape))}return o={scores:null},t.includeEmbedding?[4,this.ensureModelWithEmbeddingOutputCreated()]:[3,5];case 4:return m.sent(),s=this.modelWithEmbeddingOutput.predict(a),i=s[0],o.embedding=s[1],[3,6];case 5:i=this.model.predict(a),m.label=6;case 6:return 1!==n?[3,8]:(l=o,[4,i.data()]);case 7:return l.scores=m.sent(),[3,10];case 8:return u=unstack(i),c=u.map(function(e){return e.data()}),h=o,[4,Promise.all(c)];case 9:h.scores=m.sent(),dispose(u),m.label=10;case 10:return t.includeSpectrogram?(d=o,p={},e instanceof Tensor?[4,e.data()]:[3,12]):[3,14];case 11:return f=m.sent(),[3,13];case 12:f=e,m.label=13;case 13:d.spectrogram=(p.data=f,p.frameSize=this.nonBatchInputShape[1],p),m.label=14;case 14:return dispose(i),[2,o]}})})},e.prototype.recognizeOnline=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,r){e.audioDataExtractor=new BrowserFftFeatureExtractor({sampleRateHz:e.parameters.sampleRateHz,numFramesPerSpectrogram:e.nonBatchInputShape[0],columnTruncateLength:e.nonBatchInputShape[1],suppressionTimeMillis:0,spectrogramCallback:function(r){return __awaiter(e,void 0,void 0,function(){var e,n,a;return __generator(this,function(i){switch(i.label){case 0:return e=normalize(r),[4,this.audioDataExtractor.stop()];case 1:return i.sent(),n=t,a={},[4,e.data()];case 2:return n.apply(void 0,[(a.data=i.sent(),a.frameSize=this.nonBatchInputShape[1],a)]),e.dispose(),[2,!1]}})})},overlapFactor:0}),e.audioDataExtractor.start()})]})})},e.prototype.createTransfer=function(e){if(null==this.model)throw new Error(\"Model has not been loaded yet. Load model by calling ensureModelLoaded(), recognizer(), or listen().\");util.assert(null!=e&&\"string\"==typeof e&&e.length>1,function(){return\"Expected the name for a transfer-learning recognized to be a non-empty string, but got \"+JSON.stringify(e)}),util.assert(null==this.transferRecognizers[e],function(){return\"There is already a transfer-learning model named '\"+e+\"'\"});var t=new TransferBrowserFftSpeechCommandRecognizer(e,this.parameters,this.model);return this.transferRecognizers[e]=t,t},e.prototype.freezeModel=function(){var e,t;try{for(var r=__values(this.model.layers),n=r.next();!n.done;n=r.next()){n.value.trainable=!1}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.checkInputTensorShape=function(e){var t=this.model.inputs[0].shape.length;if(e.shape.length!==t)throw new Error(\"Expected input Tensor to have rank \"+t+\", but got rank \"+e.shape.length+\" that differs \");var r=e.shape.slice(1),n=this.model.inputs[0].shape.slice(1);if(!util.arraysEqual(r,n))throw new Error(\"Expected input to have shape [null,\"+n+\"], but got shape [null,\"+r+\"]\")},e.VALID_VOCABULARY_NAMES=[\"18w\",\"directional4w\"],e.DEFAULT_VOCABULARY_NAME=\"18w\",e}(),TransferBrowserFftSpeechCommandRecognizer=function(e){function t(t,r,n){var a=e.call(this)||this;return a.name=t,a.parameters=r,a.baseModel=n,util.assert(null!=t&&\"string\"==typeof t&&t.length>0,function(){return\"The name of a transfer model must be a non-empty string, but got \"+JSON.stringify(t)}),a.nonBatchInputShape=a.baseModel.inputs[0].shape.slice(1),a.words=null,a.dataset=new Dataset,a}return __extends(t,e),t.prototype.collectExample=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,a,i,o=this;return __generator(this,function(s){if(util.assert(!this.streaming,function(){return\"Cannot start collection of transfer-learning example because a streaming recognition or transfer-learning example collection is ongoing\"}),util.assert(null!=e&&\"string\"==typeof e&&e.length>0,function(){return\"Must provide a non-empty string when collecting transfer-learning example\"}),null==t&&(t={}),null!=t.durationMultiplier&&null!=t.durationSec)throw new Error(\"durationMultiplier and durationSec are mutually exclusive, but are both specified.\");return null!=t.durationSec?(util.assert(t.durationSec>0,function(){return\"Expected durationSec to be > 0, but got \"+t.durationSec}),n=this.parameters.fftSize/this.parameters.sampleRateHz,r=Math.ceil(t.durationSec/n)):null!=t.durationMultiplier?(util.assert(t.durationMultiplier>=1,function(){return\"Expected duration multiplier to be >= 1, but got \"+t.durationMultiplier}),r=Math.round(this.nonBatchInputShape[0]*t.durationMultiplier)):r=this.nonBatchInputShape[0],null!=t.snippetDurationSec&&(util.assert(t.snippetDurationSec>0,function(){return\"snippetDurationSec is expected to be > 0, but got \"+t.snippetDurationSec}),util.assert(null!=t.onSnippet,function(){return\"onSnippet must be provided if snippetDurationSec is provided.\"})),null!=t.onSnippet&&util.assert(null!=t.snippetDurationSec,function(){return\"snippetDurationSec must be provided if onSnippet is provided.\"}),a=this.parameters.fftSize/this.parameters.sampleRateHz,i=a*r,this.streaming=!0,[2,new Promise(function(n){var a=null==t.snippetDurationSec?1:t.snippetDurationSec/i,s=1-a,l=Math.round(1/a),u=0,c=-1,h=[];o.audioDataExtractor=new BrowserFftFeatureExtractor({sampleRateHz:o.parameters.sampleRateHz,numFramesPerSpectrogram:r,columnTruncateLength:o.nonBatchInputShape[1],suppressionTimeMillis:0,spectrogramCallback:function(r,a){return __awaiter(o,void 0,void 0,function(){var i,o,s,d,p,f,m,g,v,y,w,b,_,S,E,x,A,T,I,D;return __generator(this,function(F){switch(F.label){case 0:return null!=t.onSnippet?[3,7]:(i=normalize(r),s=(o=this.dataset).addExample,d={label:e},p={},[4,i.data()]);case 1:return d.spectrogram=(p.data=F.sent(),p.frameSize=this.nonBatchInputShape[1],p),t.includeRawAudio?(m={},[4,a.data()]):[3,3];case 2:return m.data=F.sent(),m.sampleRateHz=this.audioDataExtractor.sampleRateHz,f=m,[3,4];case 3:f=void 0,F.label=4;case 4:return s.apply(o,[(d.rawAudio=f,d)]),i.dispose(),[4,this.audioDataExtractor.stop()];case 5:return F.sent(),this.streaming=!1,this.collateTransferWords(),g=n,v={},[4,r.data()];case 6:return g.apply(void 0,[(v.data=F.sent(),v.frameSize=this.nonBatchInputShape[1],v)]),[3,13];case 7:return[4,r.data()];case 8:for(y=F.sent(),-1===c&&(c=y.length),w=c-1;0!==y[w]&&w>=0;)w--;return b=c-w-1,c=w+1,_=y.slice(y.length-b,y.length),h.push(_),null!=t.onSnippet&&t.onSnippet({data:_,frameSize:this.nonBatchInputShape[1]}),u++!==l?[3,13]:[4,this.audioDataExtractor.stop()];case 9:return F.sent(),this.streaming=!1,this.collateTransferWords(),S=normalizeFloat32Array(concatenateFloat32Arrays(h)),E={data:S,frameSize:this.nonBatchInputShape[1]},A=(x=this.dataset).addExample,T={label:e,spectrogram:E},t.includeRawAudio?(D={},[4,a.data()]):[3,11];case 10:return D.data=F.sent(),D.sampleRateHz=this.audioDataExtractor.sampleRateHz,I=D,[3,12];case 11:I=void 0,F.label=12;case 12:A.apply(x,[(T.rawAudio=I,T)]),n(E),F.label=13;case 13:return[2,!1]}})})},overlapFactor:s,includeRawAudio:t.includeRawAudio}),o.audioDataExtractor.start(t.audioTrackConstraints)})]})})},t.prototype.clearExamples=function(){var e=this;util.assert(null!=this.words&&this.words.length>0&&!this.dataset.empty(),function(){return\"No transfer learning examples exist for model name \"+e.name}),this.dataset.clear(),this.words=null},t.prototype.countExamples=function(){if(this.dataset.empty())throw new Error(\"No examples have been collected for transfer-learning model named '\"+this.name+\"' yet.\");return this.dataset.getExampleCounts()},t.prototype.getExamples=function(e){return this.dataset.getExamples(e)},t.prototype.setExampleKeyFrameIndex=function(e,t){this.dataset.setExampleKeyFrameIndex(e,t)},t.prototype.removeExample=function(e){this.dataset.removeExample(e),this.collateTransferWords()},t.prototype.isDatasetEmpty=function(){return this.dataset.empty()},t.prototype.loadExamples=function(e,t){var r,n,a,i;void 0===t&&(t=!1);var o=new Dataset(e);t&&this.clearExamples();var s=o.getVocabulary();try{for(var l=__values(s),u=l.next();!u.done;u=l.next()){var c=u.value,h=o.getExamples(c);try{for(var d=(a=void 0,__values(h)),p=d.next();!p.done;p=d.next()){var f=p.value;this.dataset.addExample(f.example)}}catch(e){a={error:e}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}this.collateTransferWords()},t.prototype.serializeExamples=function(e){return this.dataset.serialize(e)},t.prototype.collateTransferWords=function(){this.words=this.dataset.getVocabulary()},t.prototype.collectTransferDataAsTensors=function(e,t){var r=this.nonBatchInputShape[0];e=e||DEFAULT_WINDOW_HOP_RATIO;var n=Math.round(e*r),a=this.dataset.getData(null,__assign({numFrames:r,hopFrames:n},t));return{xs:a.xs,ys:a.ys}},t.prototype.collectTransferDataAsTfDataset=function(e,t,r,n){void 0===t&&(t=.15),void 0===r&&(r=32);var a=this.nonBatchInputShape[0];e=e||DEFAULT_WINDOW_HOP_RATIO;var i=Math.round(e*a);return this.dataset.getData(null,__assign({numFrames:a,hopFrames:i,getDataset:!0,datasetBatchSize:r,datasetValidationSplit:t},n))},t.prototype.train=function(e){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return util.assert(null!=this.words&&this.words.length>0,function(){return\"Cannot train transfer-learning model '\"+r.name+\"' because no transfer learning example has been collected.\"}),util.assert(this.words.length>1,function(){return\"Cannot train transfer-learning model '\"+r.name+\"' because only 1 word label ('\"+JSON.stringify(r.words)+\"') has been collected for transfer learning. Requires at least 2.\"}),null!=e.fineTuningEpochs&&util.assert(e.fineTuningEpochs>=0&&Number.isInteger(e.fineTuningEpochs),function(){return\"If specified, fineTuningEpochs must be a non-negative integer, but received \"+e.fineTuningEpochs}),null==e&&(e={}),null==this.model&&this.createTransferModelFromBaseModel(),this.secondLastBaseDenseLayer.trainable=!1,this.model.compile({loss:\"categoricalCrossentropy\",optimizer:e.optimizer||\"sgd\",metrics:[\"acc\"]}),t=null==e.fitDatasetDurationMillisThreshold?6e4:e.fitDatasetDurationMillisThreshold,this.dataset.durationMillis()>t?(console.log(\"Detected large dataset: total duration = \"+this.dataset.durationMillis()+\" ms > \"+t+\" ms. Training transfer model using fitDataset() instead of fit()\"),[2,this.trainOnDataset(e)]):[2,this.trainOnTensors(e)]})})},t.prototype.trainOnDataset=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,a,i,o,s,l,u;return __generator(this,function(c){switch(c.label){case 0:return util.assert(e.epochs>0,function(){return\"Invalid config.epochs\"}),t=null==e.batchSize?32:e.batchSize,r=e.windowHopRatio||DEFAULT_WINDOW_HOP_RATIO,n=__read(this.collectTransferDataAsTfDataset(r,e.validationSplit,t,{augmentByMixingNoiseRatio:e.augmentByMixingNoiseRatio}),2),a=n[0],i=n[1],o=util.now(),[4,this.model.fitDataset(a,{epochs:e.epochs,validationData:e.validationSplit>0?i:null,callbacks:null==e.callback?null:[e.callback]})];case 1:return s=c.sent(),console.log(\"fitDataset() took \"+(util.now()-o).toFixed(2)+\" ms\"),null!=e.fineTuningEpochs&&e.fineTuningEpochs>0?(l=util.now(),[4,this.fineTuningUsingTfDatasets(e,a,i)]):[3,3];case 2:return u=c.sent(),console.log(\"fitDataset() (fine-tuning) took \"+(util.now()-l).toFixed(2)+\" ms\"),[2,[s,u]];case 3:return[2,s]}})})},t.prototype.trainOnTensors=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,a,i,o,s,l,u,c;return __generator(this,function(h){switch(h.label){case 0:t=e.windowHopRatio||DEFAULT_WINDOW_HOP_RATIO,r=this.collectTransferDataAsTensors(t,{augmentByMixingNoiseRatio:e.augmentByMixingNoiseRatio}),n=r.xs,a=r.ys,console.log(\"Training data: xs.shape = \"+n.shape+\", ys.shape = \"+a.shape),h.label=1;case 1:return h.trys.push([1,,6,7]),null!=e.validationSplit?(l=balancedTrainValSplit(n,a,e.validationSplit),i=l.trainXs,o=l.trainYs,s=[l.valXs,l.valYs]):(i=n,o=a),[4,this.model.fit(i,o,{epochs:null==e.epochs?20:e.epochs,validationData:s,batchSize:e.batchSize,callbacks:null==e.callback?null:[e.callback]})];case 2:return u=h.sent(),null!=e.fineTuningEpochs&&e.fineTuningEpochs>0?[4,this.fineTuningUsingTensors(e,i,o,s)]:[3,4];case 3:return c=h.sent(),[2,[u,c]];case 4:return[2,u];case 5:return[3,7];case 6:return dispose([n,a,i,o,s]),[7];case 7:return[2]}})})},t.prototype.fineTuningUsingTfDatasets=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var n,a,i;return __generator(this,function(o){switch(o.label){case 0:return n=this.secondLastBaseDenseLayer.trainable,this.secondLastBaseDenseLayer.trainable=!0,a=null==e.fineTuningOptimizer?\"sgd\":e.fineTuningOptimizer,this.model.compile({loss:\"categoricalCrossentropy\",optimizer:a,metrics:[\"acc\"]}),[4,this.model.fitDataset(t,{epochs:e.fineTuningEpochs,validationData:r,callbacks:null==e.callback?null:[e.callback]})];case 1:return i=o.sent(),this.secondLastBaseDenseLayer.trainable=n,[2,i]}})})},t.prototype.fineTuningUsingTensors=function(e,t,r,n){return __awaiter(this,void 0,void 0,function(){var a,i,o;return __generator(this,function(s){switch(s.label){case 0:return a=this.secondLastBaseDenseLayer.trainable,this.secondLastBaseDenseLayer.trainable=!0,i=null==e.fineTuningOptimizer?\"sgd\":e.fineTuningOptimizer,this.model.compile({loss:\"categoricalCrossentropy\",optimizer:i,metrics:[\"acc\"]}),[4,this.model.fit(t,r,{epochs:e.fineTuningEpochs,validationData:n,batchSize:e.batchSize,callbacks:null==e.fineTuningCallback?null:[e.fineTuningCallback]})];case 1:return o=s.sent(),this.secondLastBaseDenseLayer.trainable=a,[2,o]}})})},t.prototype.evaluate=function(e){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return util.assert(null!=e.wordProbThresholds&&e.wordProbThresholds.length>0,function(){return\"Received null or empty wordProbThresholds\"}),t=0,util.assert(this.words[t]===BACKGROUND_NOISE_TAG,function(){return\"Cannot perform evaluation when the first tag is not \"+BACKGROUND_NOISE_TAG}),[2,tidy(function(){for(var n=[],a=0,i=r.collectTransferDataAsTensors(e.windowHopRatio),o=i.xs,s=i.ys.argMax(-1).dataSync(),l=r.model.predict(o),u=max(slice(l,[0,1],[l.shape[0],l.shape[1]-1]),-1),c=l.shape[0],h=0;h<e.wordProbThresholds.length;++h){for(var d=e.wordProbThresholds[h],p=u.greater(scalar(d)).dataSync(),f=0,m=0,g=0,v=0,y=0;y<c;++y)s[y]===t?(f++,p[y]&&g++):(m++,p[y]&&v++);var w=g/f,b=v/m;n.push({probThreshold:d,fpr:w,tpr:b}),console.log(\"ROC thresh=\"+d+\": fpr=\"+w.toFixed(4)+\", tpr=\"+b.toFixed(4)),h>0&&(a+=Math.abs(n[h-1].fpr-n[h].fpr)*(n[h-1].tpr+n[h].tpr)/2)}return{rocCurve:n,auc:a}})]})})},t.prototype.createTransferModelFromBaseModel=function(){var e=this;util.assert(null!=this.words,function(){return\"No word example is available for tranfer-learning model of name \"+e.name});for(var t=this.baseModel.layers,r=t.length-2;r>=0&&\"dense\"!==t[r].getClassName().toLowerCase();)r--;if(r<0)throw new Error(\"Cannot find a hidden dense layer in the base model.\");this.secondLastBaseDenseLayer=t[r];var n=this.secondLastBaseDenseLayer.output;this.transferHead=sequential(),this.transferHead.add(layers.dense({units:this.words.length,activation:\"softmax\",inputShape:n.shape.slice(1),name:\"NewHeadDense\"}));var a=this.transferHead.apply(n);this.model=model({inputs:this.baseModel.inputs,outputs:a})},t.prototype.modelInputShape=function(){return this.baseModel.inputs[0].shape},t.prototype.getMetadata=function(){return{tfjsSpeechCommandsVersion:version,modelName:this.name,timeStamp:(new Date).toISOString(),wordLabels:this.wordLabels()}},t.prototype.save=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n;return __generator(this,function(a){return t=null!=e,e=e||getCanonicalSavePath(this.name),t||(r=localStorageWrapper.localStorage.getItem(SAVED_MODEL_METADATA_KEY),(n=null==r?{}:JSON.parse(r))[this.name]=this.getMetadata(),localStorageWrapper.localStorage.setItem(SAVED_MODEL_METADATA_KEY,JSON.stringify(n))),console.log(\"Saving model to \"+e),[2,this.model.save(e)]})})},t.prototype.load=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n;return __generator(this,function(a){switch(a.label){case 0:if(t=null!=e,e=e||getCanonicalSavePath(this.name),!t){if(null==(r=JSON.parse(localStorageWrapper.localStorage.getItem(SAVED_MODEL_METADATA_KEY)))||null==r[this.name])throw new Error(\"Cannot find metadata for transfer model named \"+this.name+'\"');this.words=r[this.name].wordLabels,console.log(\"Loaded word list for model named \"+this.name+\": \"+this.words)}return n=this,[4,loadLayersModel(e)];case 1:return n.model=a.sent(),console.log(\"Loaded model from \"+e+\":\"),this.model.summary(),[2]}})})},t.prototype.createTransfer=function(e){throw new Error(\"Creating transfer-learned recognizer from a transfer-learned recognizer is not supported.\")},t}(BrowserFftSpeechCommandRecognizer);function getCanonicalSavePath(e){return\"\"+SAVE_PATH_PREFIX+e}function listSavedTransferModels(){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(n){switch(n.label){case 0:return[4,io.listModels()];case 1:for(r in e=n.sent(),t=[],e)r.startsWith(SAVE_PATH_PREFIX)&&t.push(r.slice(SAVE_PATH_PREFIX.length));return[2,t]}})})}function deleteSavedTransferModel(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return null==(t=JSON.parse(localStorageWrapper.localStorage.getItem(SAVED_MODEL_METADATA_KEY)))&&(t={}),null!=t[e]&&delete t[e],localStorageWrapper.localStorage.setItem(SAVED_MODEL_METADATA_KEY,JSON.stringify(t)),[4,io.removeModel(getCanonicalSavePath(e))];case 1:return r.sent(),[2]}})})}function create(e,t,r,n){if(util.assert(null==r&&null==n||null!=r&&null!=n,function(){return\"customModelURL and customMetadataURL must be both provided or both not provided.\"}),null!=r&&util.assert(null==t,function(){return\"vocabulary name must be null or undefined when modelURL is provided.\"}),\"BROWSER_FFT\"===e)return new BrowserFftSpeechCommandRecognizer(t,r,n);throw\"SOFT_FFT\"===e?new Error(\"SOFT_FFT SpeechCommandRecognizer has not been implemented yet.\"):new Error(\"Invalid fftType: '\"+e+\"'\")}var utils={concatenateFloat32Arrays:concatenateFloat32Arrays,normalizeFloat32Array:normalizeFloat32Array,normalize:normalize,playRawAudio:playRawAudio};export{create,utils,BACKGROUND_NOISE_TAG,Dataset,getMaxIntensityFrameIndex,spectrogram2IntensityCurve,deleteSavedTransferModel,listSavedTransferModels,UNKNOWN_TAG,version};\n"]},"metadata":{},"sourceType":"module"}